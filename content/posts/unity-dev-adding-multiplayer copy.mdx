---
title: Unity Dev - Adding Multiplayer Again!
date: 2025-06-26T16:32:00.000Z
---

Unity Multiplayer with Steam via FizzySteamworks

```
     ┌────────────────────┐
     │     Unity Game     │
     │ (Your Scene + UI)  │
     └────────┬───────────┘
              │
              ▼
     ┌────────────────────┐
     │   Mirror (HLAPI)   │
     │ NetworkManager     │
     │ Player spawning    │
     │ Cmd/Rpc logic      │
     └────────┬───────────┘
              │ uses
              ▼
     ┌────────────────────┐
     │  FizzySteamworks   │
     │ (Mirror Transport) │
     │ Connects to peers  │
     │ over SteamP2P      │
     └────────┬───────────┘
              │ via
              ▼
     ┌────────────────────┐
     │  Steamworks.NET    │
     │ Steam API binding  │
     │ CSteamID / Overlay │
     │ Lobbies / Invites  │
     └────────┬───────────┘
              │ talks to
              ▼
     ┌────────────────────┐
     │     Steam Client   │
     │ (AppID 480)        │
     │ Overlay + Friends  │
     └────────────────────┘

```


Perfect — understanding the full stack visually will make everything click. Here's a clear **diagram and explanation** of how your network flow works with **Unity → Mirror → FizzySteamworks → Steamworks.NET**.

---

## 🧩 **Diagram: Unity Multiplayer with Steam via FizzySteamworks**

```plaintext
     ┌────────────────────┐
     │     Unity Game     │
     │ (Your Scene + UI)  │
     └────────┬───────────┘
              │
              ▼
     ┌────────────────────┐
     │   Mirror (HLAPI)   │
     │ NetworkManager     │
     │ Player spawning    │
     │ Cmd/Rpc logic      │
     └────────┬───────────┘
              │ uses
              ▼
     ┌────────────────────┐
     │  FizzySteamworks   │
     │ (Mirror Transport) │
     │ Connects to peers  │
     │ over SteamP2P      │
     └────────┬───────────┘
              │ via
              ▼
     ┌────────────────────┐
     │  Steamworks.NET    │
     │ Steam API binding  │
     │ CSteamID / Overlay │
     │ Lobbies / Invites  │
     └────────┬───────────┘
              │ talks to
              ▼
     ┌────────────────────┐
     │     Steam Client   │
     │ (AppID 480)        │
     │ Overlay + Friends  │
     └────────────────────┘
```

---

## Role of Each Layer

### Unity Game

* Contains your scenes, buttons, and player GameObjects
* You call `NetworkManager.StartHost()` or `StartClient()` from scripts like `SteamLobbyManager`

---

### Mirror

* Unity’s high-level networking layer (HLAPI)
* Handles:
  * Spawning and syncing `NetworkPlayer`
  * RPCs like `CmdThrowBall`, `RpcSetHeldBall`
  * Hooks like `OnStartLocalPlayer()`
* Delegates all connection logic to the transport

---

### FizzySteamworks

* A **transport plugin** for Mirror
* Replaces `KCPTransport`
* Uses Steam’s P2P system instead of IP-based sockets
* Key API:
  * `ClientConnect(string steamId)`
  * `ServerStart()` (used inside `StartHost()`)

---

### Steamworks.NET

* C# wrapper for Valve’s native Steam API
* Provides:

  * `SteamUser.GetSteamID()`
  * `SteamMatchmaking.CreateLobby(...)`
  * `SteamFriends.GetPersonaName()`
* Exposes `CSteamID`, lobby events, and callback system

---

### **Steam Client**

* Handles the real P2P connection under the hood
* Manages friend invites, NAT traversal, overlay
* Must be running for Steamworks.NET to work

---

## **Typical Flow (Invite and Join)**

1. Host starts game
2. `SteamLobbyManager` auto-creates a Steam Lobby
3. Lobby metadata is set: `"HostAddress" = SteamID`
4. Host calls `NetworkManager.StartHost()` (Mirror sets up server)
5. Friend accepts invite → triggers `OnGameLobbyJoinRequested`
6. Friend joins lobby → triggers `OnLobbyEntered`
7. Lobby metadata is read → SteamID is extracted
8. `fizzy.ClientConnect(steamId)` is called
9. `StartClient()` connects Mirror to host via Steam P2P
10. Host spawns new player over Mirror

---

