"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{6760:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(5155),o=s(2115),n=s(258),l=s(6750),i=s(362),r=s(9080),_=s(7381),m=s(5503),c=s(9809),d=s(9585),p=s(2232),h=s(2324),S=s(4068),g=s(3531),y=s(3946);function u(e){let{nodes:t,materials:s}=(0,g.p)((0,y.O)("models/the_og_shop.glb"));return(0,a.jsx)("group",{...e,dispose:null,children:(0,a.jsxs)("group",{name:"Scene",userData:{blosm:{defaultLevels:[{levels:4,weight:10},{levels:5,weight:40},{levels:6,weight:10}]}},children:[(0,a.jsxs)("group",{name:"SM_Prop_Skylight_01_Glass_1001",position:[-1.966,-1.294,6.017],userData:{name:"SM_Prop_Skylight_01_Glass_1.001",ant_landscape:{}},children:[(0,a.jsx)("mesh",{name:"Scene12125",geometry:t.Scene12125.geometry,material:s.Glass_01}),(0,a.jsx)("mesh",{name:"Scene12125_1",geometry:t.Scene12125_1.geometry,material:s.Synty_Palette_A})]}),(0,a.jsxs)("group",{name:"SM_Prop_Skylight_01_Glass_1002",position:[-1.966,.132,6.017],userData:{name:"SM_Prop_Skylight_01_Glass_1.002",ant_landscape:{}},children:[(0,a.jsx)("mesh",{name:"Scene12128",geometry:t.Scene12128.geometry,material:s.Glass_01}),(0,a.jsx)("mesh",{name:"Scene12128_1",geometry:t.Scene12128_1.geometry,material:s.Synty_Palette_A})]}),(0,a.jsxs)("group",{name:"SM_Prop_Skylight_01_Glass_1003",position:[-1.966,1.553,6.017],userData:{name:"SM_Prop_Skylight_01_Glass_1.003",ant_landscape:{}},children:[(0,a.jsx)("mesh",{name:"Scene12129",geometry:t.Scene12129.geometry,material:s.Glass_01}),(0,a.jsx)("mesh",{name:"Scene12129_1",geometry:t.Scene12129_1.geometry,material:s.Synty_Palette_A})]}),(0,a.jsxs)("group",{name:"SM_Prop_Skylight_01_Glass_1004",position:[-4.19,-1.294,6.017],userData:{name:"SM_Prop_Skylight_01_Glass_1.004",ant_landscape:{}},children:[(0,a.jsx)("mesh",{name:"Scene12131",geometry:t.Scene12131.geometry,material:s.Glass_01}),(0,a.jsx)("mesh",{name:"Scene12131_1",geometry:t.Scene12131_1.geometry,material:s.Synty_Palette_A})]}),(0,a.jsx)("mesh",{name:"SM_Bld_Shop_08",geometry:t.SM_Bld_Shop_08.geometry,material:s.Synty_Palette_A,position:[-3,0,10],rotation:[Math.PI/2,0,Math.PI],scale:.002,userData:{name:"SM_Bld_Shop_08",ant_landscape:{}}}),(0,a.jsx)("mesh",{name:"SM_Bld_Shop_08001",geometry:t.SM_Bld_Shop_08001.geometry,material:s.Synty_Palette_A,position:[-7.169,0,10],rotation:[Math.PI/2,0,1.571],scale:.002,userData:{name:"SM_Bld_Shop_08.001",ant_landscape:{}}}),(0,a.jsx)("mesh",{name:"SM_Bld_Shop_08002",geometry:t.SM_Bld_Shop_08002.geometry,material:s.Synty_Palette_A,position:[-7.169,0,11],rotation:[Math.PI/2,0,1.571],scale:.002,userData:{name:"SM_Bld_Shop_08.002",ant_landscape:{}}})]})})}g.p.preload((0,y.O)("models/the_og_shop.glb"));let x=o.memo(function(e){let{taxisRef:t,deliveriesRef:s,pickupNodesRef:o,deliveryTimerRef:g,isPaused:y,debugMode:x,isRushHour:f,followTaxiId:j}=e;return(0,a.jsxs)(n.Hl,{camera:{position:[8,10,8],fov:50},shadows:!1,frameloop:"always",children:[(0,a.jsx)(S.t,{}),(0,a.jsx)("ambientLight",{intensity:.6}),(0,a.jsx)("directionalLight",{position:[5,10,5],intensity:.8,castShadow:!1}),(0,a.jsx)(l.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2.2,minDistance:3,maxDistance:50,panSpeed:.8,makeDefault:!0}),(0,a.jsx)(h.m,{taxisRef:t,followTaxiId:j}),(0,a.jsx)(i.A,{}),(0,a.jsx)(r.A,{debugMode:x}),(0,a.jsx)(_.h,{}),(0,a.jsx)(d.m,{taxisRef:t,isPaused:y}),(0,a.jsx)(u,{}),(0,a.jsx)(c.C,{deliveriesRef:s,deliveryTimerRef:g,pickupNodesRef:o,taxisRef:t,isPaused:y,isRushHour:f}),(0,a.jsx)(m.I,{deliveriesRef:s,pickupNodesRef:o,taxisRef:t}),(0,a.jsx)(p.W,{taxisRef:t,deliveriesRef:s,isPaused:y})]})})},9080:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5155),o=s(1288),n=s(8946),l=s(5304);function i(e){let{debugMode:t}=e,s=(0,n.nt)();return(0,a.jsxs)("group",{children:[t&&s.paths.map(e=>{let t=e.points.map(e=>[e.x,e.y,e.z]);return(0,a.jsx)(o.N,{points:t,color:"#00ff88",lineWidth:2,dashed:!1},e.id)}),t&&s.nodes.map(e=>{let t="#888888";return(0,l.Xm)(e,"pickup")&&(t="#00ff00"),(0,l.Xm)(e,"dropoff")&&(t="#ff0000"),(0,l.Xm)(e,"red_light")&&(t="#ff8800"),(0,l.Xm)(e,"service")&&(t="#0088ff"),(0,l.Xm)(e,"intersection")&&(t="#ffff00"),(0,a.jsxs)("mesh",{position:e.position,children:[(0,a.jsx)("sphereGeometry",{args:[.2,8,8]}),(0,a.jsx)("meshStandardMaterial",{color:t,emissive:t,emissiveIntensity:.5})]},e.id)})]})}},9585:(e,t,s)=>{s.d(t,{m:()=>l});var a=s(9980),o=s(4510);function n(e){console.log("⏪ ".concat(e.id," reversing immediately at t=").concat(e.t.toFixed(2))),e.isReversing=!0,e.collisionCooldown=2e3}function l(e){let{taxisRef:t,isPaused:s}=e;return(0,a.D)((e,a)=>{s||!function(e,t){for(let s of e)s.collisionCooldown>0&&(s.collisionCooldown-=t);for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++){let a=e[t],l=e[s];if(a.collisionCooldown>0||l.collisionCooldown>0||a.isReversing||l.isReversing||!a.path||!l.path)continue;let i=(0,o.KQ)(a.path,a.t),r=(0,o.KQ)(l.path,l.t),_=i.distanceTo(r);_<.5&&(console.log("\uD83D\uDCA5 COLLISION: ".concat(a.id," ↔️ ").concat(l.id," (distance: ").concat(_.toFixed(2),")")),n(a),n(l))}}(t.current,1e3*a)}),null}}}]);