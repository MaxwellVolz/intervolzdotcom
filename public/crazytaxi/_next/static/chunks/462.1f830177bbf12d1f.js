"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{2462:(e,t,o)=>{o.r(t),o.d(t,{default:()=>f});var s=o(5155),n=o(8661),r=o.n(n),d=o(2115),i=o(5921),a=o(3511),c=o(7909),l=o(8774),p=o(4476);let x=(0,c.default)(()=>Promise.all([o.e(367),o.e(413),o.e(268),o.e(737),o.e(506)]).then(o.bind(o,506)),{loadableGenerated:{webpack:()=>[506]},ssr:!1});function f(e){var t;let{onComplete:o}=e,[n,c]=(0,d.useState)(0),[f,u]=(0,d.useState)("tutorial-taxi-1"),[b,m]=(0,d.useState)(!1),[h,g]=(0,d.useState)(!0),{taxisRef:j,deliveriesRef:v,pickupNodesRef:w,deliveryTimerRef:k}=function(){let e=(0,d.useRef)([{id:"tutorial-taxi-1",state:"driving_to_pickup",path:null,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:0,isReversing:!1,collisionCooldown:0}]),t=(0,d.useRef)([]),o=(0,d.useRef)(1e4),s=(0,d.useRef)([]),n=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{let o=o=>{let{network:r}=o.detail;if(console.log("\uD83D\uDCDA Tutorial received road network update:",r),r.paths.length>0&&e.current[0]){let t=r.paths[0];e.current[0].path=t,e.current[0].t=0,console.log("âœ… Tutorial taxi on path: ".concat(t.id)),console.log("   Total paths: ".concat(r.paths.length))}if(r.nodes){let e=r.nodes.filter(e=>e.types.includes("pickup"));if(s.current=e,console.log("\uD83D\uDCCD Tutorial has ".concat(e.length," pickup nodes")),e.length>=2&&!n.current){for(let o=0;o<2;o++){let o=(0,l.aK)(e,t.current);o&&t.current.push(o)}n.current=!0,console.log("\uD83C\uDFAE Tutorial spawned 2 initial deliveries")}}};return window.addEventListener("roadNetworkUpdated",o),()=>{window.removeEventListener("roadNetworkUpdated",o)}},[]),{taxisRef:e,deliveriesRef:t,pickupNodesRef:s,deliveryTimerRef:o}}(),y=[{title:"Camera Controls",description:"Bottom left icons set chase or overview."},{title:"Run the Intersections",description:"Tap intersections to direct traffic!"},{title:"Deliver Packages",description:"Pick up packages and deliver them to matching color drop-offs."}],z=y[n],N=(0,d.useCallback)(e=>{u(t=>t===e?null:e)},[]),C=(0,d.useCallback)(()=>{u(null)},[]),R=(0,d.useCallback)(()=>{m(e=>!e)},[]);return(0,d.useEffect)(()=>{let e=e=>{" "===e.key&&(e.preventDefault(),R())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[R]),(0,s.jsxs)("div",{className:"jsx-5d066de96f31380c tutorial-container",children:[(0,s.jsx)(x,{taxisRef:j,deliveriesRef:v,pickupNodesRef:w,deliveryTimerRef:k,followTaxiId:f,isPaused:b}),(0,s.jsxs)("div",{className:"jsx-5d066de96f31380c tutorial-overlay",children:[(0,s.jsx)(p.l,{taxisRef:j,onTaxiSelect:N,onResetCamera:C,selectedTaxiId:f}),(0,s.jsxs)("div",{className:"jsx-5d066de96f31380c top-left-buttons",children:[(0,s.jsx)("button",{onClick:()=>{o()},className:"jsx-5d066de96f31380c start-game-button",children:"Start Game"}),!h&&(0,s.jsx)("button",{onClick:()=>{g(!0)},className:"jsx-5d066de96f31380c show-tutorial-button",children:"Show Tutorial"})]}),(0,s.jsx)("div",{className:"jsx-5d066de96f31380c pause-container",children:(0,s.jsx)("button",{onClick:R,className:"jsx-5d066de96f31380c pause-button",children:b?(0,s.jsx)(i.A,{size:24}):(0,s.jsx)(a.A,{size:24})})}),(0,s.jsxs)("div",{className:"jsx-5d066de96f31380c money-display",children:["$",(null==(t=j.current[0])?void 0:t.money)||0]}),h&&(0,s.jsxs)("div",{className:"jsx-5d066de96f31380c instruction-panel",children:[(0,s.jsx)("h2",{className:"jsx-5d066de96f31380c step-title",children:z.title}),(0,s.jsx)("p",{className:"jsx-5d066de96f31380c step-description",children:z.description}),(0,s.jsxs)("div",{className:"jsx-5d066de96f31380c button-group",children:[n>0&&(0,s.jsx)("button",{onClick:()=>{n>0&&c(n-1)},className:"jsx-5d066de96f31380c previous-button",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>{n<y.length-1?c(n+1):g(!1)},className:"jsx-5d066de96f31380c next-button",children:n<y.length-1?"Next":"Play Tutorial"})]})]})]}),(0,s.jsx)(r(),{id:"5d066de96f31380c",children:".tutorial-container.jsx-5d066de96f31380c{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000}.tutorial-overlay.jsx-5d066de96f31380c{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:100}.top-left-buttons.jsx-5d066de96f31380c{position:absolute;top:20px;left:20px;display:flex;flex-direction:column;gap:12px;pointer-events:auto}.start-game-button.jsx-5d066de96f31380c{font-size:18px;font-weight:bold;padding:8px 16px;background:#0f0;color:#000;border:none;border-radius:4px;cursor:pointer;font-family:monospace;transition:all.2s}.start-game-button.jsx-5d066de96f31380c:hover{background:#0d0;transform:scale(1.05)}.start-game-button.jsx-5d066de96f31380c:active{transform:scale(.95)}.show-tutorial-button.jsx-5d066de96f31380c{background:transparent;color:#fff;border:2px solid#ff0;border-radius:8px;padding:12px 24px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all.2s;box-shadow:0 4px 12px rgba(255,255,0,.2)}.show-tutorial-button.jsx-5d066de96f31380c:hover{background:rgba(255,255,0,.1);transform:translatey(-2px);box-shadow:0 6px 16px rgba(255,255,0,.3)}.pause-container.jsx-5d066de96f31380c{position:absolute;bottom:20px;right:20px;pointer-events:auto;z-index:100}.pause-button.jsx-5d066de96f31380c{width:50px;height:50px;background:rgba(255,255,255,.9);color:#000;border:2px solid#333;border-radius:8px;cursor:pointer;transition:all.2s;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,.3);padding:0}.pause-button.jsx-5d066de96f31380c:hover{background:#fff;transform:scale(1.1);border-color:#f80}.pause-button.jsx-5d066de96f31380c:active{transform:scale(.95)}.money-display.jsx-5d066de96f31380c{position:fixed;top:20px;right:20px;font-size:32px;font-weight:bold;color:#ff0;text-shadow:2px 2px 4px rgba(0,0,0,.8);font-family:monospace;pointer-events:none;z-index:100}.instruction-panel.jsx-5d066de96f31380c{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.9);border-top:3px solid#ff0;padding:2rem;width:100%;pointer-events:auto;box-shadow:0 -8px 32px rgba(255,255,0,.3);z-index:50;min-height:180px}.step-title.jsx-5d066de96f31380c{color:#ff0;font-size:1.5rem;font-weight:900;margin:0 0 .75rem 0;text-align:center;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.step-description.jsx-5d066de96f31380c{color:#fff;font-size:1rem;margin:0 0 1.5rem 0;padding:0 2rem;text-align:center;line-height:1.6}.button-group.jsx-5d066de96f31380c{display:flex;gap:1rem;justify-content:center;margin-bottom:1rem}.next-button.jsx-5d066de96f31380c,.previous-button.jsx-5d066de96f31380c{padding:1rem 2rem;font-size:1.1rem;font-weight:700;border-radius:8px;cursor:pointer;transition:all.2s;border:none}.next-button.jsx-5d066de96f31380c{background:#ff0;color:#000;box-shadow:0 4px 12px rgba(255,255,0,.4)}.next-button.jsx-5d066de96f31380c:hover{background:#fff200;transform:translatey(-2px);box-shadow:0 6px 16px rgba(255,255,0,.5)}.previous-button.jsx-5d066de96f31380c{background:transparent;color:#fff;border:2px solid#666}.previous-button.jsx-5d066de96f31380c:hover{border-color:#fff;transform:translatey(-2px)}@media(max-width:768px){.instruction-panel.jsx-5d066de96f31380c{padding:1.5rem 1rem}.step-title.jsx-5d066de96f31380c{font-size:1.25rem}.step-description.jsx-5d066de96f31380c{font-size:.9rem;margin-bottom:1.25rem}.next-button.jsx-5d066de96f31380c,.previous-button.jsx-5d066de96f31380c{padding:.75rem 1.5rem;font-size:1rem}.top-left-buttons.jsx-5d066de96f31380c{top:10px;left:10px;gap:8px}.start-game-button.jsx-5d066de96f31380c{padding:6px 12px;font-size:14px}.show-tutorial-button.jsx-5d066de96f31380c{padding:6px 12px;font-size:14px}.money-display.jsx-5d066de96f31380c{top:10px;right:10px;font-size:24px}.pause-container.jsx-5d066de96f31380c{bottom:10px;right:10px}.pause-button.jsx-5d066de96f31380c{width:40px;height:40px}}@media(max-width:480px){.instruction-panel.jsx-5d066de96f31380c{padding:1.25rem .75rem}.step-title.jsx-5d066de96f31380c{font-size:1.1rem}.step-description.jsx-5d066de96f31380c{font-size:.85rem;margin-bottom:1rem}.next-button.jsx-5d066de96f31380c,.previous-button.jsx-5d066de96f31380c{padding:.65rem 1.25rem;font-size:.9rem}}"})]})}}}]);