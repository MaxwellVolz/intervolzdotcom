(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4476:(e,t,n)=>{"use strict";n.d(t,{l:()=>c});var o=n(5155),a=n(8661),i=n.n(a),r=n(9068),s=n(7944);function c(e){let{taxisRef:t,onTaxiSelect:n,onResetCamera:a,selectedTaxiId:c}=e,d=t.current;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-71c21e0aa35d66d0 taxi-controls",children:[(0,o.jsx)("button",{onClick:a,title:"Reset Camera to Center",className:"jsx-71c21e0aa35d66d0 "+"taxi-icon globe-icon ".concat(c?"":"active"),children:(0,o.jsx)(r.A,{className:"icon",size:24})}),(0,o.jsx)("div",{className:"jsx-71c21e0aa35d66d0 separator"}),d.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>n(e.id),title:"Follow ".concat(e.id),className:"jsx-71c21e0aa35d66d0 "+"taxi-icon ".concat(c===e.id?"active":""),children:[(0,o.jsx)(s.A,{className:"icon",size:24}),(0,o.jsx)("span",{className:"jsx-71c21e0aa35d66d0 taxi-number",children:t+1})]},e.id))]}),(0,o.jsx)(i(),{id:"71c21e0aa35d66d0",children:".taxi-controls.jsx-71c21e0aa35d66d0{position:fixed;bottom:80px;left:20px;display:flex;flex-direction:column;gap:8px;pointer-events:auto;z-index:100}.taxi-icon.jsx-71c21e0aa35d66d0{position:relative;width:50px;height:50px;background:rgba(255,255,255,.9);border:2px solid#333;border-radius:8px;cursor:pointer;transition:all.2s;display:flex;align-items:center;justify-content:center;padding:0}.taxi-icon.jsx-71c21e0aa35d66d0:hover{background:#fff;transform:scale(1.1);border-color:#0f0}.taxi-icon.active.jsx-71c21e0aa35d66d0{background:#0f0;border-color:#0a0;box-shadow:0 0 10px rgba(0,255,0,.5)}.taxi-icon.active.jsx-71c21e0aa35d66d0:hover{background:#0d0}.taxi-icon.globe-icon.jsx-71c21e0aa35d66d0{border-color:#08f}.taxi-icon.globe-icon.jsx-71c21e0aa35d66d0:hover{border-color:#08f;box-shadow:0 0 8px rgba(0,136,255,.4)}.taxi-icon.globe-icon.active.jsx-71c21e0aa35d66d0{background:#08f;border-color:#06c;box-shadow:0 0 10px rgba(0,136,255,.5)}.separator.jsx-71c21e0aa35d66d0{width:100%;height:2px;background:rgba(255,255,255,.3);margin:4px 0}.taxi-number.jsx-71c21e0aa35d66d0{position:absolute;bottom:2px;right:4px;font-size:10px;font-weight:bold;background:rgba(0,0,0,.7);color:white;padding:2px 4px;border-radius:3px;font-family:monospace}.icon.jsx-71c21e0aa35d66d0{width:24px;height:24px}@media(max-width:768px){.taxi-controls.jsx-71c21e0aa35d66d0{bottom:10px;left:10px;gap:6px}.taxi-icon.jsx-71c21e0aa35d66d0{width:40px;height:40px}.icon.jsx-71c21e0aa35d66d0{width:20px;height:20px}.taxi-number.jsx-71c21e0aa35d66d0{font-size:8px;padding:1px 3px}}"})]})}},4510:(e,t,n)=>{"use strict";n.d(t,{E$:()=>i,KQ:()=>r,ac:()=>s});var o=n(5339),a=n(8946);function i(e,t,n){if("stopped"===e.state||!e.path)return;let o=t*e.speed/e.path.length;e.isReversing?(e.t-=o,e.t<=0&&(e.t=0,e.isReversing=!1,console.log("✅ ".concat(e.id," finished reversing, back at start of path")),function(e,t){if(!e.path)return;let n=e.path.id,o=n.split("_to_");if(2!==o.length)return console.warn("⚠️ Invalid path ID format: ".concat(n));let i=o[0],r=o[1],s="".concat(r,"_to_").concat(i);console.log("\uD83D\uDD04 ".concat(e.id," at ").concat(i,", routing from here (was reversing on ").concat(n,")"));let c=(0,a.D3)(s,t,e);c?(console.log("\uD83D\uDE95 Post-reversal transition: ".concat(i," → ").concat(c.id)),e.path=c,e.t=0):console.warn("⚠️ No next path found from ".concat(i," after reversal"))}(e,n))):(e.t+=o,e.t>=1&&(e.t=1,function(e,t){if(!e.path)return;let n=e.path.id,o=n.split("_to_");2===o.length&&(e.previousNodeId=o[0]);let i=(0,a.D3)(n,t,e);i?(console.log("\uD83D\uDE95 Path transition: ".concat(n," → ").concat(i.id)),e.path=i,e.t=0):console.warn("⚠️ No next path found for ".concat(n))}(e,n)))}function r(e,t){if(0===e.points.length)return new o.Pq0;if(1===e.points.length)return e.points[0].clone();let n=Math.max(0,Math.min(1,t)),a=Math.floor(n*(e.points.length-1)),i=Math.min(a+1,e.points.length-1),r=n*(e.points.length-1)%1;return e.points[a].clone().lerp(e.points[i],r)}function s(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].distanceTo(e[n+1]);return t}},8113:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var o=n(5155),a=n(2115),i=n(7909),r=n(8661),s=n.n(r),c=n(8946),d=n(8774),l=n(5921),f=n(3511);function p(e){let{taxisRef:t,onGameOver:n,isPaused:i,onTogglePause:r,onRushHourChange:d}=e,[p,x]=(0,a.useState)(0),[u,h]=(0,a.useState)(300),[g,b]=(0,a.useState)(120),[m,j]=(0,a.useState)(0),[w,v]=(0,a.useState)(Date.now()),[y,k]=(0,a.useState)(!1),[D,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setInterval(()=>{let e=t.current.reduce((e,t)=>e+t.money,0);if(x(e),i)v(Date.now());else{let t=Date.now(),o=(t-w)/1e3;v(t);let a=m+o;j(a);let i=Math.max(0,120-a);b(i),i<=30&&i>0&&!y&&(k(!0),N(!0),null==d||d(!0),setTimeout(()=>{N(!1)},3e3)),i<=0&&n(e)}},100);return()=>clearInterval(e)},[t,n,i,m,w,y,d]);let z=p>=u,_=Math.floor(g);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-1842188066bfd8c2 top-bar",children:(0,o.jsxs)("button",{onClick:()=>{if(p<u)return void console.log("❌ Not enough money! Need $".concat(u,", have $").concat(p));let e=(0,c.nt)();if(0===e.paths.length)return void console.warn("⚠️ No paths available to spawn taxi");let n=e.paths.filter(e=>e.id.startsWith("INT_bottom_left_to_")),o=n.length>0?n[0]:e.paths[0],a={id:"taxi-".concat(t.current.length+1),state:"driving_to_pickup",path:o,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:-u,isReversing:!1,collisionCooldown:0};t.current.push(a),console.log("\uD83D\uDE95 Spawned ".concat(a.id," on path ").concat(o.id," for $").concat(u)),h(u+100)},disabled:!z,className:"jsx-1842188066bfd8c2 spawn-button",children:["+ Taxi ($",u,")"]})}),(0,o.jsx)("div",{className:"jsx-1842188066bfd8c2 timer-display",children:_}),(0,o.jsxs)("div",{className:"jsx-1842188066bfd8c2 money-display",children:["$",p]}),(0,o.jsx)("div",{className:"jsx-1842188066bfd8c2 pause-container",children:(0,o.jsx)("button",{onClick:r,title:i?"Resume Game ($0)":"Pause Game ($10)",className:"jsx-1842188066bfd8c2 pause-button",children:i?(0,o.jsx)(l.A,{className:"icon",size:24}):(0,o.jsx)(f.A,{className:"icon",size:24})})}),D&&(0,o.jsx)("div",{className:"jsx-1842188066bfd8c2 rush-hour-banner",children:(0,o.jsx)("div",{className:"jsx-1842188066bfd8c2 rush-hour-text",children:"RUSH HOUR"})}),(0,o.jsx)(s(),{id:"1842188066bfd8c2",children:'.top-bar.jsx-1842188066bfd8c2{position:fixed;top:20px;left:20px;pointer-events:auto;z-index:100}.spawn-button.jsx-1842188066bfd8c2{font-size:18px;font-weight:bold;padding:8px 16px;background:#0f0;color:#000;border:none;border-radius:4px;cursor:pointer;font-family:monospace;transition:all.2s}.spawn-button.jsx-1842188066bfd8c2:hover{background:#0d0;transform:scale(1.05)}.spawn-button.jsx-1842188066bfd8c2:active{transform:scale(.95)}.spawn-button.jsx-1842188066bfd8c2:disabled{background:#666;color:#999;cursor:not-allowed;transform:none}.spawn-button.jsx-1842188066bfd8c2:disabled:hover{background:#666;transform:none}.timer-display.jsx-1842188066bfd8c2{position:fixed;top:20px;left:50%;transform:translatex(-50%);font-size:32px;font-weight:bold;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8);font-family:monospace;padding:8px 16px;border-radius:4px;min-width:80px;text-align:center;background:rgba(0,0,0,.5);pointer-events:none;z-index:100}.pause-container.jsx-1842188066bfd8c2{position:fixed;bottom:20px;right:20px;pointer-events:auto;z-index:100}.pause-button.jsx-1842188066bfd8c2{width:50px;height:50px;background:rgba(255,255,255,.9);color:#000;border:2px solid#333;border-radius:8px;cursor:pointer;transition:all.2s;display:flex;align-items:center;justify-content:center;padding:0}.pause-button.jsx-1842188066bfd8c2:hover{background:#fff;transform:scale(1.1);border-color:#f80}.pause-button.jsx-1842188066bfd8c2:active{transform:scale(.95)}.icon.jsx-1842188066bfd8c2{width:24px;height:24px}.money-display.jsx-1842188066bfd8c2{position:fixed;top:20px;right:20px;font-size:32px;font-weight:bold;color:#ff0;text-shadow:2px 2px 4px rgba(0,0,0,.8);font-family:monospace;pointer-events:none;z-index:100}.rush-hour-banner.jsx-1842188066bfd8c2{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#f00,#f80,#f00);padding:40px 80px;border-radius:20px;border:6px solid#ff0;box-shadow:0 0 40px rgba(255,0,0,.8),inset 0 0 20px rgba(255,255,0,.5);pointer-events:none;z-index:200;animation:rushHourPulse.5s ease-in-out infinite alternate,rushHourZoom.3s ease-out}.rush-hour-text.jsx-1842188066bfd8c2{font-size:80px;font-weight:bold;color:#fff;text-shadow:4px 4px 8px rgba(0,0,0,.9),0 0 20px#ff0,0 0 40px#f80;font-family:"Impact",monospace;letter-spacing:8px}@keyframes rushHourPulse{from{transform:translate(-50%,-50%)scale(1)}to{transform:translate(-50%,-50%)scale(1.05)}}@keyframes rushHourZoom{from{transform:translate(-50%,-50%)scale(.5);opacity:0}to{transform:translate(-50%,-50%)scale(1);opacity:1}}@media(max-width:768px){.top-bar.jsx-1842188066bfd8c2{top:10px;left:10px}.spawn-button.jsx-1842188066bfd8c2{font-size:14px;padding:6px 12px}.timer-display.jsx-1842188066bfd8c2{top:10px;font-size:24px;padding:6px 12px;min-width:60px}.money-display.jsx-1842188066bfd8c2{top:10px;right:10px;font-size:24px}.pause-container.jsx-1842188066bfd8c2{bottom:10px;right:10px}.pause-button.jsx-1842188066bfd8c2{width:40px;height:40px}.icon.jsx-1842188066bfd8c2{width:20px;height:20px}.rush-hour-banner.jsx-1842188066bfd8c2{padding:20px 40px;border:4px solid#ff0}.rush-hour-text.jsx-1842188066bfd8c2{font-size:48px;letter-spacing:4px}}'})]})}let x="wayne_mo_high_score";function u(){try{let e=localStorage.getItem(x);return e?parseInt(e,10):0}catch(e){return console.error("Failed to read high score:",e),0}}function h(e){let{score:t,onRestart:n}=e,[i,r]=(0,a.useState)(0),[c,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{r(u());let e=function(e){try{let t=u();if(e>t)return localStorage.setItem(x,e.toString()),console.log("\uD83C\uDFC6 NEW HIGH SCORE: $".concat(e," (previous: $").concat(t,")")),!0;return!1}catch(e){return console.error("Failed to save high score:",e),!1}}(t);d(e),e&&r(t)},[t]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-e44c90d73750c22d modal-overlay",children:[c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-e44c90d73750c22d fireworks",children:[...Array(30)].map((e,t)=>{let n=["#ff0000","#00ff00","#0088ff","#ff00ff","#ffff00","#00ffff","#ff8800"],a=n[Math.floor(Math.random()*n.length)];return(0,o.jsx)("div",{style:{left:"".concat(100*Math.random(),"%"),top:"".concat(20+60*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(1+Math.random(),"s"),background:a,boxShadow:"0 0 10px ".concat(a,", 0 0 20px ").concat(a,", 0 0 30px ").concat(a)},className:"jsx-e44c90d73750c22d firework"},t)})}),(0,o.jsx)("div",{className:"jsx-e44c90d73750c22d screen-flash"})]}),(0,o.jsxs)("div",{className:"jsx-e44c90d73750c22d "+"modal-content ".concat(c?"high-score-glow":""),children:[(0,o.jsx)("h1",{className:"jsx-e44c90d73750c22d title",children:"Game Over!"}),(0,o.jsxs)("div",{className:"jsx-e44c90d73750c22d score-section",children:[(0,o.jsx)("div",{className:"jsx-e44c90d73750c22d score-label",children:"Final Score"}),(0,o.jsxs)("div",{className:"jsx-e44c90d73750c22d score-value",children:["$",t]}),c&&(0,o.jsx)("div",{className:"jsx-e44c90d73750c22d new-record",children:"\uD83C\uDFC6 NEW HIGH SCORE!"})]}),(0,o.jsxs)("div",{className:"jsx-e44c90d73750c22d high-score-section",children:[(0,o.jsx)("div",{className:"jsx-e44c90d73750c22d high-score-label",children:"High Score"}),(0,o.jsxs)("div",{className:"jsx-e44c90d73750c22d high-score-value",children:["$",i]})]}),(0,o.jsx)("button",{onClick:n,className:"jsx-e44c90d73750c22d restart-button",children:"Play Again"})]})]}),(0,o.jsx)(s(),{id:"e44c90d73750c22d",children:".modal-overlay.jsx-e44c90d73750c22d{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:1000;pointer-events:auto}.modal-content.jsx-e44c90d73750c22d{background:#1a1a1a;border:4px solid#0f0;border-radius:8px;padding:48px 64px;display:flex;flex-direction:column;align-items:center;gap:32px;box-shadow:0 0 40px rgba(0,255,0,.3);position:relative;z-index:1001}.modal-content.high-score-glow.jsx-e44c90d73750c22d{border-color:#ff0;animation:glowBorder 1.5s ease-in-out infinite}@keyframes glowBorder{0%,100%{box-shadow:0 0 40px rgba(255,255,0,.5),0 0 80px rgba(255,255,0,.3),inset 0 0 40px rgba(255,255,0,.1)}50%{box-shadow:0 0 60px rgba(255,255,0,.8),0 0 120px rgba(255,255,0,.5),inset 0 0 60px rgba(255,255,0,.2)}}.title.jsx-e44c90d73750c22d{font-size:48px;font-weight:bold;color:#0f0;margin:0;font-family:monospace;text-shadow:0 0 10px rgba(0,255,0,.5)}.score-section.jsx-e44c90d73750c22d{display:flex;flex-direction:column;align-items:center;gap:8px}.score-label.jsx-e44c90d73750c22d{font-size:24px;color:#fff;font-family:monospace}.score-value.jsx-e44c90d73750c22d{font-size:64px;font-weight:bold;color:#ff0;font-family:monospace;text-shadow:0 0 10px rgba(255,255,0,.5)}.new-record.jsx-e44c90d73750c22d{font-size:20px;font-weight:bold;color:#0f0;margin-top:8px;animation:recordPulse 1s ease-in-out infinite}.high-score-section.jsx-e44c90d73750c22d{display:flex;flex-direction:column;align-items:center;gap:4px;margin-top:16px}.high-score-label.jsx-e44c90d73750c22d{font-size:18px;color:#999;font-family:monospace}.high-score-value.jsx-e44c90d73750c22d{font-size:32px;font-weight:bold;color:#0f0;font-family:monospace}@keyframes recordPulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.05)}}.restart-button.jsx-e44c90d73750c22d{font-size:24px;font-weight:bold;padding:16px 48px;background:#0f0;color:#000;border:none;border-radius:4px;cursor:pointer;font-family:monospace;transition:all.2s}.restart-button.jsx-e44c90d73750c22d:hover{background:#0d0;transform:scale(1.05)}.restart-button.jsx-e44c90d73750c22d:active{transform:scale(.95)}.fireworks.jsx-e44c90d73750c22d{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999}.firework.jsx-e44c90d73750c22d{position:absolute;width:6px;height:6px;border-radius:50%;animation:fireworkExplode 1.5s ease-out infinite}@keyframes fireworkExplode{0%{transform:translate(0,0)scale(0);opacity:0}20%{opacity:1;transform:translate(0,-20px)scale(1)}40%{transform:translate(0,-80px)scale(3);opacity:1}50%{transform:translate(0,-100px)scale(4);opacity:.8;filter:brightness(2)}75%{transform:translate(30px,-130px)scale(2);opacity:.4}100%{transform:translate(50px,-180px)scale(0);opacity:0}}.screen-flash.jsx-e44c90d73750c22d{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,0,.3)0%,rgba(255,255,0,0)70%);pointer-events:none;z-index:998;animation:flashPulse 2s ease-in-out infinite}@keyframes flashPulse{0%,100%{opacity:0}50%{opacity:1}}"})]})}var g=n(4476);let b=(0,i.default)(()=>Promise.all([n.e(367),n.e(413),n.e(268),n.e(288),n.e(737),n.e(411)]).then(n.bind(n,8792)),{loadableGenerated:{webpack:()=>[8792]},ssr:!1,loading:()=>(0,o.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#000",color:"#fff"},children:"Loading game..."})});function m(){let[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)(0),[r,l]=(0,a.useState)(0),[f,x]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),{taxisRef:k,deliveriesRef:D,pickupNodesRef:N,deliveryTimerRef:z,initialSpawnDoneRef:_}=function(){let e=(0,a.useRef)([{id:"taxi-1",state:"driving_to_pickup",path:(0,c.nt)().paths[0]||null,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:100,isReversing:!1,collisionCooldown:0}]),t=(0,a.useRef)([]),n=(0,a.useRef)(1e4),o=(0,a.useRef)([]),i=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{let n=n=>{let{network:a}=n.detail;if(console.log("\uD83D\uDE95 Taxi received road network update:",a),a.paths.length>0&&e.current[0]){let t=a.paths.filter(e=>e.id.startsWith("INT_bottom_left_to_")),n=t.length>0?t[0]:a.paths[0];e.current[0].path=n,e.current[0].t=0,console.log("✅ Taxi spawned at starting path: ".concat(n.id)),console.log("   Available paths: ".concat(a.paths.length)),console.log("   Spawn paths from INT_bottom_left: ".concat(t.length))}if(a.nodes){let e=a.nodes.filter(e=>e.types.includes("pickup"));if(o.current=e,console.log("\uD83D\uDCCD Found ".concat(e.length," pickup nodes")),e.length>=2&&!i.current){for(let n=0;n<3;n++){let n=(0,d.aK)(e,t.current);n&&t.current.push(n)}i.current=!0,console.log("\uD83C\uDFAE Spawned 3 initial deliveries")}}};return window.addEventListener("roadNetworkUpdated",n),()=>{window.removeEventListener("roadNetworkUpdated",n)}},[]),{taxisRef:e,deliveriesRef:t,pickupNodesRef:o,deliveryTimerRef:n,initialSpawnDoneRef:i}}(),I=(0,a.useCallback)(()=>{let e=k.current.reduce((e,t)=>e+t.money,0);if(!f&&e<10)return void console.log("❌ Not enough money to pause! Need $".concat(10,", have $").concat(e));!f&&k.current.length>0&&(k.current[0].money-=10,console.log("⏸️ Paused - Deducted $".concat(10))),x(!f)},[f,k]),P=(0,a.useCallback)(e=>{y(t=>t===e?null:e)},[]),E=(0,a.useCallback)(()=>{y(null)},[]);return(0,a.useEffect)(()=>{let t=t=>{"h"===t.key.toLowerCase()?m(e=>!e):" "!==t.key||e||(t.preventDefault(),I())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,I]),(0,o.jsxs)("div",{className:"jsx-34ff5652e9ed6491 game-container",children:[(0,o.jsx)(b,{taxisRef:k,deliveriesRef:D,pickupNodesRef:N,deliveryTimerRef:z,isPaused:f,debugMode:u,isRushHour:j,followTaxiId:v}),(0,o.jsxs)("div",{className:"jsx-34ff5652e9ed6491 ui-overlay",children:[(0,o.jsx)(p,{taxisRef:k,onGameOver:n=>{e||(i(n),t(!0))},isPaused:f,onTogglePause:I,onRushHourChange:e=>{w(e),console.log("\uD83D\uDEA6 RUSH HOUR ".concat(e?"ACTIVATED":"ENDED"))}}),(0,o.jsx)(g.l,{taxisRef:k,onTaxiSelect:P,onResetCamera:E,selectedTaxiId:v}),u&&(0,o.jsx)("div",{className:"jsx-34ff5652e9ed6491 debug-indicator",children:"DEBUG MODE (Press D to toggle)"})]}),e&&(0,o.jsx)(h,{score:n,onRestart:()=>{let e=(0,c.nt)(),n=e.paths.filter(e=>e.id.startsWith("INT_bottom_left_to_"));k.current=[{id:"taxi-1",state:"driving_to_pickup",path:n.length>0?n[0]:e.paths[0],t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:100,isReversing:!1,collisionCooldown:0}],D.current=[],z.current=1e4,_.current=!1,t(!1),i(0),w(!1),l(e=>e+1)}}),(0,o.jsx)(s(),{id:"34ff5652e9ed6491",children:".game-container.jsx-34ff5652e9ed6491{position:relative;width:100vw;height:100vh;overflow:hidden}.ui-overlay.jsx-34ff5652e9ed6491{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;padding:2rem}.debug-indicator.jsx-34ff5652e9ed6491{position:fixed;top:70px;right:20px;background:rgba(255,0,0,.8);color:white;padding:8px 16px;border-radius:4px;font-family:monospace;font-size:14px;font-weight:bold;pointer-events:auto;z-index:100}@media(max-width:768px){.debug-indicator.jsx-34ff5652e9ed6491{top:60px;right:10px;font-size:12px;padding:6px 12px}}@media(max-width:480px){.debug-indicator.jsx-34ff5652e9ed6491{top:55px;right:10px;font-size:10px;padding:4px 8px}}"})]},r)}function j(e){let{onPlay:t,onTutorial:n}=e,[i,r]=(0,a.useState)(0);return(0,a.useEffect)(()=>{r(u())},[]),(0,o.jsxs)("div",{className:"jsx-c9b155f2db42a997 intro-scene",children:[(0,o.jsxs)("div",{className:"jsx-c9b155f2db42a997 intro-content",children:[(0,o.jsx)("h1",{className:"jsx-c9b155f2db42a997 game-title",children:"Wayne Mo"}),(0,o.jsx)("p",{className:"jsx-c9b155f2db42a997 game-subtitle",children:'"AI" Taxi Game'}),(0,o.jsx)("button",{onClick:n,className:"jsx-c9b155f2db42a997 tutorial-button",children:"HOW TO PLAY"}),i>0&&(0,o.jsxs)("div",{className:"jsx-c9b155f2db42a997 high-score-display",children:[(0,o.jsx)("div",{className:"jsx-c9b155f2db42a997 high-score-label",children:"High Score"}),(0,o.jsxs)("div",{className:"jsx-c9b155f2db42a997 high-score-value",children:["$",i]})]}),(0,o.jsx)("div",{className:"jsx-c9b155f2db42a997 intro-hints",children:(0,o.jsx)("p",{className:"jsx-c9b155f2db42a997",children:"Command your autonomous taxi fleet"})})]}),(0,o.jsx)("div",{className:"jsx-c9b155f2db42a997 button-container",children:(0,o.jsx)("button",{onClick:t,className:"jsx-c9b155f2db42a997 play-button",children:"PLAY"})}),(0,o.jsx)(s(),{id:"c9b155f2db42a997",children:'.intro-scene.jsx-c9b155f2db42a997{position:fixed;top:0;left:0;width:100vw;height:100vh;height:100dvh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem;z-index:1000;overflow-y:auto;overflow-x:hidden;padding:2rem 1rem;-webkit-overflow-scrolling:touch}.intro-scene.jsx-c9b155f2db42a997::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:linear-gradient(45deg,#000 25%,transparent 25%),linear-gradient(-45deg,#000 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#000 75%),linear-gradient(-45deg,transparent 75%,#000 75%);background-size:80px 80px;background-position:0 0,0 40px,40px -40px,-40px 0px;background-color:#ff0;opacity:.15;pointer-events:none;z-index:0}.intro-content.jsx-c9b155f2db42a997{text-align:center;color:white;animation:fadeIn 1s ease-in;width:100%;max-width:1200px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;z-index:1;flex-shrink:0}.button-container.jsx-c9b155f2db42a997{display:flex;flex-direction:column;gap:1.5rem;align-items:center;width:100%;max-width:600px;padding:0 2rem;position:relative;z-index:1;flex-shrink:0}.game-title.jsx-c9b155f2db42a997{font-family:var(--font-racing-sans-one),"Arial Black",sans-serif;font-size:10rem;font-weight:400;letter-spacing:.2em;margin:0;text-shadow:4px 4px 8px rgba(0,0,0,.3);color:#ff0;-webkit-text-stroke:2px#ff6b00}.game-subtitle.jsx-c9b155f2db42a997{font-size:1.2rem;letter-spacing:.3em;margin:1rem 0 1rem;opacity:.9}.high-score-display.jsx-c9b155f2db42a997{display:flex;flex-direction:column;align-items:center;gap:12px;margin:2rem 0;padding:2.5rem 4rem;background:rgba(0,0,0,.3);border:4px solid#ff0;border-radius:16px;box-shadow:0 0 30px rgba(255,255,0,.3),inset 0 0 20px rgba(0,0,0,.4);backdrop-filter:blur(10px);position:relative;overflow:hidden;width:90%;max-width:600px}.high-score-display.jsx-c9b155f2db42a997::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:repeating-linear-gradient(0deg,transparent,transparent 10px,rgba(255,255,0,.05)10px,rgba(255,255,0,.05)20px),repeating-linear-gradient(90deg,transparent,transparent 10px,rgba(255,255,0,.05)10px,rgba(255,255,0,.05)20px);pointer-events:none;z-index:0}.high-score-label.jsx-c9b155f2db42a997{font-size:1rem;letter-spacing:.2em;color:rgba(255,255,255,.9);text-transform:uppercase;font-weight:bold;position:relative;z-index:1}.high-score-value.jsx-c9b155f2db42a997{font-size:3.5rem;font-weight:900;color:#0f0;text-shadow:0 0 20px rgba(0,255,0,.8),0 0 40px rgba(0,255,0,.4),2px 2px 4px rgba(0,0,0,.8);font-family:monospace;position:relative;z-index:1}.play-button.jsx-c9b155f2db42a997{background:#ff0;color:#000;border:4px solid#ff6b00;padding:1.5rem 4rem;font-size:2rem;font-weight:900;letter-spacing:.2em;cursor:pointer;transition:all.3s ease;box-shadow:0 8px 16px rgba(0,0,0,.3);border-radius:8px;width:100%}.play-button.jsx-c9b155f2db42a997:hover{transform:translatey(-4px)scale(1.05);box-shadow:0 12px 24px rgba(0,0,0,.4);background:#fff200}.play-button.jsx-c9b155f2db42a997:active{transform:translatey(-2px)scale(1.02)}.tutorial-button.jsx-c9b155f2db42a997{background:transparent;color:#fff;border:3px solid#ff0;padding:1rem 3rem;font-size:1.5rem;font-weight:700;letter-spacing:.15em;cursor:pointer;transition:all.3s ease;box-shadow:0 4px 12px rgba(0,0,0,.2);border-radius:8px;margin-top:2rem}.tutorial-button.jsx-c9b155f2db42a997:hover{transform:translatey(-4px)scale(1.05);box-shadow:0 8px 20px rgba(255,255,0,.3);background:rgba(255,255,0,.1)}.tutorial-button.jsx-c9b155f2db42a997:active{transform:translatey(-2px)scale(1.02)}.intro-hints.jsx-c9b155f2db42a997{margin-top:2rem;opacity:.7}.intro-hints.jsx-c9b155f2db42a997 p.jsx-c9b155f2db42a997{margin:.5rem 0;font-size:1.1rem}@keyframes fadeIn{from{opacity:0;transform:translatey(20px)}to{opacity:1;transform:translatey(0)}}@media(max-width:768px){.intro-scene.jsx-c9b155f2db42a997{padding:1.5rem 0;justify-content:center;gap:1.5rem}.intro-content.jsx-c9b155f2db42a997{justify-content:center;padding-top:0}.game-title.jsx-c9b155f2db42a997{font-family:var(--font-racing-sans-one),"Arial Black",sans-serif;font-size:4rem;letter-spacing:.15em;-webkit-text-stroke:1.5px#ff6b00;margin-bottom:.5rem;width:100%;padding:0 1rem}.game-subtitle.jsx-c9b155f2db42a997{font-size:1rem;letter-spacing:.25em;margin:.75rem 0 1.5rem;width:100%}.high-score-display.jsx-c9b155f2db42a997{margin:1.5rem 0;padding:1.5rem 2.5rem;border:3px solid#ff0;border-radius:12px}.high-score-label.jsx-c9b155f2db42a997{font-size:.9rem}.high-score-value.jsx-c9b155f2db42a997{font-size:2.5rem}.play-button.jsx-c9b155f2db42a997{padding:1.25rem 3rem;font-size:1.75rem;letter-spacing:.15em;width:100%;border:3px solid#ff6b00}.button-container.jsx-c9b155f2db42a997{gap:1.25rem;padding:0 1.5rem;max-width:500px}.tutorial-button.jsx-c9b155f2db42a997{padding:.9rem 2rem;font-size:1.2rem;letter-spacing:.12em;margin-top:1.5rem}.high-score-display.jsx-c9b155f2db42a997{width:85%;padding:2rem 3rem}.intro-hints.jsx-c9b155f2db42a997{margin-top:2rem}.intro-hints.jsx-c9b155f2db42a997 p.jsx-c9b155f2db42a997{font-size:1rem}}@media(max-width:480px){.intro-scene.jsx-c9b155f2db42a997{padding:1rem 0;gap:1rem}.intro-content.jsx-c9b155f2db42a997{padding-top:0}.game-title.jsx-c9b155f2db42a997{font-family:var(--font-racing-sans-one),"Arial Black",sans-serif;font-size:3rem;letter-spacing:.1em;-webkit-text-stroke:1.25px#ff6b00;margin-bottom:.5rem;width:100%;padding:0 .75rem}.game-subtitle.jsx-c9b155f2db42a997{font-size:.85rem;letter-spacing:.2em;margin:.5rem 0 1.25rem;width:100%}.high-score-display.jsx-c9b155f2db42a997{margin:1.25rem 0;padding:1.25rem 2rem;border:3px solid#ff0;border-radius:10px}.high-score-label.jsx-c9b155f2db42a997{font-size:.8rem}.high-score-value.jsx-c9b155f2db42a997{font-size:2rem}.play-button.jsx-c9b155f2db42a997{padding:1rem 2.5rem;font-size:1.5rem;letter-spacing:.1em;border:3px solid#ff6b00;width:100%}.button-container.jsx-c9b155f2db42a997{gap:1rem;padding:0 1rem;max-width:400px}.tutorial-button.jsx-c9b155f2db42a997{padding:.8rem 1.75rem;font-size:1.1rem;margin-top:1.25rem}.high-score-display.jsx-c9b155f2db42a997{width:90%}.intro-hints.jsx-c9b155f2db42a997{margin-top:1.5rem}.intro-hints.jsx-c9b155f2db42a997 p.jsx-c9b155f2db42a997{font-size:.9rem}}@media(max-width:360px){.intro-scene.jsx-c9b155f2db42a997{padding:.75rem 0;gap:.75rem}.intro-content.jsx-c9b155f2db42a997{padding-top:0}.game-title.jsx-c9b155f2db42a997{font-family:var(--font-racing-sans-one),"Arial Black",sans-serif;font-size:2.5rem;letter-spacing:.08em;-webkit-text-stroke:1px#ff6b00;width:100%;padding:0 .5rem}.game-subtitle.jsx-c9b155f2db42a997{font-size:.75rem;letter-spacing:.15em;margin:.5rem 0 1rem;width:100%}.high-score-display.jsx-c9b155f2db42a997{margin:1rem 0;padding:1rem 1.5rem;border:2px solid#ff0;border-radius:8px}.high-score-label.jsx-c9b155f2db42a997{font-size:.7rem}.high-score-value.jsx-c9b155f2db42a997{font-size:1.75rem}.play-button.jsx-c9b155f2db42a997{padding:.9rem 2rem;font-size:1.3rem;letter-spacing:.08em;border:3px solid#ff6b00;width:100%}.button-container.jsx-c9b155f2db42a997{gap:.85rem;padding:0 .75rem;max-width:350px}.tutorial-button.jsx-c9b155f2db42a997{padding:.7rem 1.5rem;font-size:1rem;margin-top:1rem}.high-score-display.jsx-c9b155f2db42a997{width:92%}.intro-hints.jsx-c9b155f2db42a997{margin-top:1.25rem}.intro-hints.jsx-c9b155f2db42a997 p.jsx-c9b155f2db42a997{font-size:.85rem}}'})]})}let w=(0,i.default)(()=>n.e(462).then(n.bind(n,2462)),{loadableGenerated:{webpack:()=>[2462]},ssr:!1,loading:()=>(0,o.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#000",color:"#fff"},children:"Loading tutorial..."})});function v(){let[e,t]=(0,a.useState)("intro");return"intro"===e?(0,o.jsx)(j,{onPlay:()=>t("game"),onTutorial:()=>t("tutorial")}):"tutorial"===e?(0,o.jsx)(w,{onComplete:()=>t("game")}):(0,o.jsx)(m,{})}},8164:(e,t,n)=>{Promise.resolve().then(n.bind(n,8113))},8774:(e,t,n)=>{"use strict";n.d(t,{WF:()=>s,aK:()=>i});var o=n(5339);let a=["#ff1a1a","#ff6a00","#ffb000","#ff00aa","#c400ff","#5a00ff","#004dff","#0019ff","#8b0000","#ff3d00","#ff0099","#9b00ff"];function i(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length<2)return console.warn("⚠️ Not enough pickup nodes to spawn delivery"),null;let i=new Set;o.forEach(e=>{"waiting_pickup"===e.status&&i.add(e.pickupNodeId),"in_transit"===e.status&&i.add(e.dropoffNodeId)});let r=e.filter(e=>!i.has(e.id));if(r.length<2)return console.warn("⚠️ Not enough available pickup nodes (all nodes in use)"),null;let s=r[Math.floor(Math.random()*r.length)],c=e.filter(e=>e.id!==s.id);if(0===c.length)return console.warn("⚠️ No valid dropoff nodes (only one pickup node exists)"),null;let d=c[Math.floor(Math.random()*c.length)];if(s.id===d.id)return console.error("❌ GUARD FAILED: Pickup and dropoff are the same node!"),null;let l=s.position.distanceTo(d.position),f=Math.floor((((null==(t=s.metadata)?void 0:t.payoutMultiplier)||1)+((null==(n=d.metadata)?void 0:n.payoutMultiplier)||1))/2*(100+10*l)),p=new Set(o.map(e=>e.color)),x=a.filter(e=>!p.has(e)),u=x.length>0?x:a,h=u[Math.floor(Math.random()*u.length)],g={id:"delivery-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),pickupNodeId:s.id,dropoffNodeId:d.id,status:"waiting_pickup",spawnTime:Date.now(),payout:f,color:h};return console.log("\uD83D\uDCE6 Spawned delivery: ".concat(s.id," → ").concat(d.id," ($").concat(f,") [").concat(h,"]")),g}function r(e,t,n){for(let o of t.filter(e=>"waiting_pickup"===e.status)){let t=n.find(e=>e.id===o.pickupNodeId);if(t&&1.1>e.distanceTo(t.position))return{event:o,node:t}}return null}function s(e,t,n){let a=[];for(let s of e){if(!s.path)continue;let e=s.path.points;if(e.length<2)continue;let c=1/(e.length-1),d=Math.floor(s.t/c),l=s.t%c/c,f=e[Math.min(d,e.length-2)],p=e[Math.min(d+1,e.length-1)],x=new o.Pq0().lerpVectors(f,p,l);if(s.hasPackage){let e=r(x,t,n);e&&.1>Math.random()&&console.log("\uD83D\uDEAB ".concat(s.id," ignoring pickup ").concat(e.event.id," (already carrying ").concat(s.currentDeliveryId,")"))}else{var i;let e=r(x,t,n);e&&(i=e.event,s.hasPackage=!0,s.currentDeliveryId=i.id,i.status="in_transit",i.claimedByTaxiId=s.id,i.pickupTime=Date.now(),console.log("\uD83D\uDE95 ".concat(s.id," picked up ").concat(i.id," at ").concat(i.pickupNodeId)))}if(s.currentDeliveryId){let e=function(e,t,n,o){let a=n.find(e=>e.id===t&&"in_transit"===e.status);if(!a)return null;let i=o.find(e=>e.id===a.dropoffNodeId);return i&&1.1>e.distanceTo(i.position)?{event:a,node:i}:null}(x,s.currentDeliveryId,t,n);e&&(!function(e,t){e.hasPackage=!1,e.currentDeliveryId=void 0,e.money+=t.payout,t.status="completed",t.deliveryTime=Date.now();let n=((t.deliveryTime-t.spawnTime)/1e3).toFixed(1);console.log("✅ ".concat(e.id," completed ").concat(t.id," at ").concat(t.dropoffNodeId," (+$").concat(t.payout,") in ").concat(n,"s")),t.payout}(s,e.event),a.push(e.event.id))}}return a}},8946:(e,t,n)=>{"use strict";n.d(t,{D3:()=>g,nt:()=>h,WW:()=>u});var o=n(5339),a=n(4510);function i(e){return["North","East","South","West"][e]}let r=[new o.Pq0(-15,.2,-15),new o.Pq0(-15,.2,-5),new o.Pq0(-15,.2,5),new o.Pq0(-15,.2,15)],s=[new o.Pq0(-15,.2,15),new o.Pq0(-5,.2,15),new o.Pq0(5,.2,15),new o.Pq0(15,.2,15)],c=[new o.Pq0(15,.2,15),new o.Pq0(15,.2,5),new o.Pq0(15,.2,-5),new o.Pq0(15,.2,-15)],d=[new o.Pq0(15,.2,-15),new o.Pq0(5,.2,-15),new o.Pq0(-5,.2,-15),new o.Pq0(-15,.2,-15)],l={id:"path-1",points:r,length:(0,a.ac)(r)},f={id:"path-2",points:s,length:(0,a.ac)(s)},p={id:"path-3",points:c,length:(0,a.ac)(c)},x={paths:[l,f,p,{id:"path-4",points:d,length:(0,a.ac)(d)}],nodes:[{id:"node-1",position:new o.Pq0(-15,.2,-15),neighbors:["node-2","node-4",null,null],types:["intersection"]},{id:"node-2",position:new o.Pq0(-15,.2,15),neighbors:[null,"node-3","node-1",null],types:["intersection","pickup"],metadata:{zoneName:"North Terminal",payoutMultiplier:1.2}},{id:"node-3",position:new o.Pq0(15,.2,15),neighbors:[null,null,"node-4","node-2"],types:["intersection","red_light"],metadata:{redLightDuration:3,greenLightDuration:5,currentState:"green"}},{id:"node-4",position:new o.Pq0(15,.2,-15),neighbors:["node-3",null,null,"node-1"],types:["intersection","dropoff"],metadata:{zoneName:"Downtown",payoutMultiplier:1}}]};function u(e){console.log("\uD83D\uDEE3️ Updating road network with ".concat(e.length," extracted nodes"));let t=[],n=new Set;return e.forEach(o=>{let i=[];o.neighbors?(i=o.neighbors.filter(e=>null!==e),console.log("  ".concat(o.id,": topological format, ").concat(i.length," neighbors"))):o.next&&(i=o.next,console.log("  ".concat(o.id,": legacy format, ").concat(i.length," next nodes"))),i.forEach(i=>{let r="".concat(o.id,"_to_").concat(i);if(n.has(r))return;let s=e.find(e=>e.id===i);if(!s)return void console.warn("⚠️ Node ".concat(i," referenced by ").concat(o.id," not found"));let c=[o.position.clone(),s.position.clone()];t.push({id:r,points:c,length:(0,a.ac)(c)}),n.add(r),console.log("  ✅ Created path: ".concat(r))})}),x={nodes:e,paths:t},console.log("✅ Road network updated: ".concat(e.length," nodes, ").concat(t.length," paths")),console.log("\uD83D\uDCCA Network Graph:"),e.forEach(e=>{e.neighbors?console.log("  ".concat(e.id," [TOPO] → N:").concat(e.neighbors[0]||"-",", E:").concat(e.neighbors[1]||"-",", S:").concat(e.neighbors[2]||"-",", W:").concat(e.neighbors[3]||"-")):e.next&&console.log("  ".concat(e.id," [LEGACY] → [").concat(e.next.join(", "),"]"))}),console.log("\uD83D\uDEE3️ Generated Paths:"),t.forEach(e=>{console.log("  ".concat(e.id," (").concat(e.length.toFixed(2)," units)"))}),x}function h(){return x}function g(e,t,n){let a=x.paths,r=x.nodes,s=e.split("_to_");if(2!==s.length)return console.warn("⚠️ Invalid path ID format: ".concat(e)),null;let c=s[0],d=s[1],l=r.find(e=>e.id===d);if(!l)return console.warn("⚠️ Destination node ".concat(d," not found")),null;if(l.neighbors&&n){var f;let e;for(let t=0;t<4;t++)if(l.neighbors[t]===c){e=t;break}void 0===e&&console.warn("⚠️ Could not calculate incomingDir for ".concat(c," → ").concat(d,", using fallback"));let o=null!=(f=null!=e?e:n.incomingDir)?f:0,r=l.types.includes("intersection")?null==t?void 0:t.get(d):void 0,s=(null==r?void 0:r.mode)||"pass_through",p=function(e,t,n){if(!e.neighbors||4!==e.neighbors.length)return console.warn("⚠️ Node ".concat(e.id," is not a valid intersection (no neighbors array)")),{nextId:null,outgoingDir:null};let o=e.neighbors.filter(e=>null!==e).length;if(1===o){let n=e.neighbors[t];if(n)return console.log("⚠️ ".concat(e.id,": Dead end, U-turn back → ").concat(n)),{nextId:n,outgoingDir:t}}if(2===o)for(let n=0;n<4;n++){let o=n;if(o!==t&&null!==e.neighbors[o]){let n=e.neighbors[o];return console.log("\uD83D\uDD04 ".concat(e.id,": Corner, Incoming ").concat(i(t)," → ").concat(i(o)," → ").concat(n)),{nextId:n,outgoingDir:o}}}for(let o of function(e,t){if(2===e)switch(t){case"pass_through":return[0,1,2,3];case"turn_right":return[1,2,3,0];case"turn_left":return[3,2,1,0]}else if(0===e)switch(t){case"pass_through":return[2,3,0,1];case"turn_right":return[3,0,1,2];case"turn_left":return[1,0,3,2]}else if(3===e)switch(t){case"pass_through":return[1,2,3,0];case"turn_right":return[2,3,0,1];case"turn_left":return[0,3,2,1]}else switch(t){case"pass_through":return[3,0,1,2];case"turn_right":return[0,1,2,3];case"turn_left":return[2,1,0,3]}}(t,n)){if(o===t)continue;let a=e.neighbors[o];if(null!==a)return console.log("✅ ".concat(e.id,": Incoming ").concat(i(t),", Mode ").concat(n,", Chose ").concat(i(o)," → ").concat(a)),{nextId:a,outgoingDir:o}}return console.warn("⚠️ ".concat(e.id,": No available path from ").concat(i(t)," with mode ").concat(n)),{nextId:null,outgoingDir:null}}(l,o,s);if(!p.nextId||null===p.outgoingDir)return console.warn("⚠️ No available route from ".concat(d)),null;{let e=a.find(e=>e.id==="".concat(d,"_to_").concat(p.nextId));if(!e)return console.warn("⚠️ Path ".concat(d,"_to_").concat(p.nextId," not found in network")),null;{let t=(p.outgoingDir+2)%4;return n.currentIntersectionId=d,n.incomingDir=t,console.log("\uD83D\uDEA6 ".concat(d,": Mode ").concat(s,", In ").concat(i(o)," → Out ").concat(i(p.outgoingDir)," → ").concat(p.nextId)),e}}}let p=a.filter(e=>e.id.startsWith("".concat(d,"_to_")));if(0===p.length)return console.warn("⚠️ No next path found from node: ".concat(d)),null;if(1===p.length)return p[0];if(l.types.includes("intersection")&&t){let n=t.get(d);if(n){let t=function(e,t,n){let a=n.filter(e=>e.id.startsWith("".concat(t.id,"_to_"))),i=n.find(t=>t.id===e);if(!i)return console.warn("⚠️ Incoming path ".concat(e," not found")),{straight:null,left:null,right:null};if(1===a.length)return{straight:a[0].id,left:null,right:null};let r={straight:null,left:null,right:null};return a.forEach(e=>{let n=function(e,t,n){let a=new o.Pq0().subVectors(e.points[e.points.length-1],e.points[e.points.length-2]).normalize(),i=new o.Pq0().subVectors(n.points[1],n.points[0]).normalize(),r=new o.Pq0().crossVectors(a,i);return a.dot(i)>.8?"straight":r.y>.1?"left":r.y<-.1?"right":"straight"}(i,0,e);r[n]?console.warn('⚠️ Multiple paths detected as "'.concat(n,'" at ').concat(t.id)):r[n]=e.id}),console.log("\uD83D\uDCCD Path categorization at ".concat(t.id,":"),{incoming:e,straight:r.straight,left:r.left,right:r.right}),r}(e,l,a),i=null;switch(n.mode){case"pass_through":i=t.straight;break;case"turn_left":i=t.left;break;case"turn_right":i=t.right}if(i){let e=a.find(e=>e.id===i);if(e)return console.log("\uD83D\uDEA6 Path-based routing at ".concat(d,": ").concat(n.mode," → ").concat(i)),e}if(t.straight){let e=a.find(e=>e.id===t.straight);if(e)return console.warn("⚠️ Intersection ".concat(d,': mode "').concat(n.mode,'" not available, using straight')),e}}}let u=Math.floor(Math.random()*p.length);return console.log("\uD83C\uDFB2 Random path selection at ".concat(d,": ").concat(p[u].id)),p[u]}}},e=>{e.O(0,[831,141,441,255,358],()=>e(e.s=8164)),_N_E=e.O()}]);