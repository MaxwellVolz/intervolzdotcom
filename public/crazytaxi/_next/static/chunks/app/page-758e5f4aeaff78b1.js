(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let o=n(5155),r=n(2115),a=n(4437);function i(e){return{default:e&&"default"in e?e.default:e}}n(6552);let l={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},s=function(e){let t={...l,...e},n=(0,r.lazy)(()=>t.loader().then(i)),s=t.loading;function c(e){let i=s?(0,o.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,c=l?r.Suspense:r.Fragment,u=t.ssr?(0,o.jsxs)(o.Fragment,{children:[null,(0,o.jsx)(n,{...e})]}):(0,o.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,o.jsx)(n,{...e})});return(0,o.jsx)(c,{...l?{fallback:i}:{},children:u})}return c.displayName="LoadableComponent",c}},1300:e=>{e.exports={introScene:"IntroScene_introScene__lu77C",introContent:"IntroScene_introContent__hturu",fadeIn:"IntroScene_fadeIn__qeKwW",buttonContainer:"IntroScene_buttonContainer__R_u2H",gameTitle:"IntroScene_gameTitle__zT0Qh",gameSubtitle:"IntroScene_gameSubtitle__pYEC_",highScoreDisplay:"IntroScene_highScoreDisplay__fxZ8Y",highScoreLabel:"IntroScene_highScoreLabel__9wYlS",highScoreValue:"IntroScene_highScoreValue__0UaWY",playButton:"IntroScene_playButton__37GnI",tutorialButton:"IntroScene_tutorialButton__V4m6v",introHints:"IntroScene_introHints__9PLBM"}},1847:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,o.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:s,className:c="",children:u,iconNode:d,...h}=e;return(0,o.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:n,strokeWidth:s?24*Number(l)/Number(r):l,className:a("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...d.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),s=(e,t)=>{let n=(0,o.forwardRef)((n,i)=>{let{className:s,...c}=n;return(0,o.createElement)(l,{ref:i,iconNode:t,className:a("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),s),...c})});return n.displayName=r(e),n}},2077:(e,t,n)=>{"use strict";n.d(t,{l:()=>u});var o=n(5155),r=n(1847);let a=(0,r.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),i=(0,r.A)("car-taxi-front",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]),l=(0,r.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var s=n(8432),c=n.n(s);function u(e){let{taxisRef:t,onTaxiSelect:n,onResetCamera:r,selectedTaxiId:s,onSpawnTaxi:u,nextTaxiCost:d,canAffordTaxi:h}=e,f=t.current;return(0,o.jsxs)("div",{className:c().taxiControls,children:[(0,o.jsxs)("button",{className:s?c().globeIcon:c().globeIconActive,onClick:r,title:"Reset Camera to Center (Press 1)",children:[(0,o.jsx)(a,{className:c().icon,size:24}),(0,o.jsx)("span",{className:c().keyHint,children:"1"})]}),(0,o.jsx)("div",{className:c().separator}),f.map((e,t)=>(0,o.jsxs)("button",{className:s===e.id?c().taxiIconActive:c().taxiIcon,onClick:()=>n(e.id),title:"Follow ".concat(e.id," (Press ").concat(t+2,")"),children:[(0,o.jsx)(i,{className:c().icon,size:24}),(0,o.jsx)("span",{className:c().keyHint,children:t+2})]},e.id)),u&&void 0!==d&&void 0!==h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:c().separator}),(0,o.jsxs)("button",{className:h?c().spawnButton:c().spawnButtonDisabled,onClick:u,disabled:!h,title:h?"Spawn Taxi - $".concat(d):"Need $".concat(d),children:[(0,o.jsx)(l,{className:c().icon,size:24}),(0,o.jsxs)("span",{className:c().price,children:["$",d]})]})]})]})}},3381:e=>{e.exports={primary:"buttons_primary__u8Xjj",secondary:"buttons_secondary__zuWVa",hero:"buttons_hero__AsVin",icon:"buttons_icon__uvhk1",iconActive:"buttons_iconActive__Exoqd buttons_icon__uvhk1"}},3511:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});let o=(0,n(1847).A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return l}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class o{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return r?new r:new o}function i(e){return r?r.bind(e):o.bind(e)}function l(){return r?r.snapshot():function(e,...t){return e(...t)}}},4437:(e,t,n)=>{"use strict";function o(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}}),n(4553)},4510:(e,t,n)=>{"use strict";n.d(t,{E$:()=>a,KQ:()=>i,ac:()=>l});var o=n(5339),r=n(8946);function a(e,t,n){if("stopped"===e.state||!e.path)return;let o=t*e.speed/e.path.length;e.isReversing?(e.t-=o,e.t<=0&&(e.t=0,e.isReversing=!1,console.log("✅ ".concat(e.id," finished reversing, back at start of path")),function(e,t){if(!e.path)return;let n=e.path.id,o=n.split("_to_");if(2!==o.length)return console.warn("⚠️ Invalid path ID format: ".concat(n));let a=o[0],i=o[1],l="".concat(i,"_to_").concat(a);console.log("\uD83D\uDD04 ".concat(e.id," at ").concat(a,", routing from here (was reversing on ").concat(n,")"));let s=(0,r.D3)(l,t,e);s?(console.log("\uD83D\uDE95 Post-reversal transition: ".concat(a," → ").concat(s.id)),e.path=s,e.t=0):console.warn("⚠️ No next path found from ".concat(a," after reversal"))}(e,n))):(e.t+=o,e.t>=1&&(e.t=1,function(e,t){if(!e.path)return;let n=e.path.id,o=n.split("_to_");2===o.length&&(e.previousNodeId=o[0]);let a=(0,r.D3)(n,t,e);a?(console.log("\uD83D\uDE95 Path transition: ".concat(n," → ").concat(a.id)),e.path=a,e.t=0):console.warn("⚠️ No next path found for ".concat(n))}(e,n)))}function i(e,t){if(0===e.points.length)return new o.Pq0;if(1===e.points.length)return e.points[0].clone();let n=Math.max(0,Math.min(1,t)),r=Math.floor(n*(e.points.length-1)),a=Math.min(r+1,e.points.length-1),i=n*(e.points.length-1)%1;return e.points[r].clone().lerp(e.points[a],i)}function l(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].distanceTo(e[n+1]);return t}},4825:e=>{e.exports={rushHourBanner:"GameHUD_rushHourBanner__lcUi5",rushHourPulse:"GameHUD_rushHourPulse__9p___",rushHourZoom:"GameHUD_rushHourZoom__NV0l3",rushHourText:"GameHUD_rushHourText__f30dg"}},5921:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});let o=(0,n(1847).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},6278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let o=n(8140)._(n(1150));function r(e,t){var n;let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,o.default)({...a,modules:null==(n=a.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6552:(e,t,n)=>{"use strict";function o(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return o}}),n(5155),n(7650),n(8567),n(7278)},7828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return o}});let o=(0,n(4054).createAsyncLocalStorage)()},7909:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.a});var o=n(6278),r=n.n(o)},8164:(e,t,n)=>{Promise.resolve().then(n.bind(n,8504))},8432:e=>{e.exports={taxiControls:"TaxiControls_taxiControls__bYisF",taxiIcon:"TaxiControls_taxiIcon__ClKuV",taxiIconActive:"TaxiControls_taxiIconActive__CBQUD TaxiControls_taxiIcon__ClKuV",globeIcon:"TaxiControls_globeIcon__IKfu6 TaxiControls_taxiIcon__ClKuV",globeIconActive:"TaxiControls_globeIconActive__X0bfo TaxiControls_globeIcon__IKfu6 TaxiControls_taxiIcon__ClKuV",separator:"TaxiControls_separator__xUlZL",keyHint:"TaxiControls_keyHint__lwsyY",icon:"TaxiControls_icon__q2Glr",spawnButton:"TaxiControls_spawnButton__wZm_X",spawnButtonDisabled:"TaxiControls_spawnButtonDisabled__WIcdm",price:"TaxiControls_price__lcYrv"}},8504:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var o=n(5155),r=n(2115),a=n(7909),i=n(8946),l=n(8774);let s=(0,n(1847).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var c=n(5921),u=n(3511),d=n(3381),h=n.n(d),f=n(8615),g=n.n(f),p=n(9135),_=n.n(p),m=n(4825),v=n.n(m);function x(e){let{taxisRef:t,onGameOver:n,isPaused:a,onTogglePause:i,onRushHourChange:l,onReset:d}=e,[f,p]=(0,r.useState)(0),[m,x]=(0,r.useState)(120),[y,w]=(0,r.useState)(0),[b,D]=(0,r.useState)(Date.now()),[k,S]=(0,r.useState)(!1),[C,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=setInterval(()=>{let e=t.current.reduce((e,t)=>e+t.money,0);if(p(e),a)D(Date.now());else{let t=Date.now(),o=(t-b)/1e3;D(t);let r=y+o;w(r);let a=Math.max(0,120-r);x(a),a<=30&&a>0&&!k&&(S(!0),N(!0),null==l||l(!0),setTimeout(()=>{N(!1)},3e3)),a<=0&&n(e)}},100);return()=>clearInterval(e)},[t,n,a,y,b,k,l]);let I=Math.floor(m);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:_().topLeft,children:(0,o.jsx)("button",{className:h().icon,onClick:d,title:"Reset Game",children:(0,o.jsx)(s,{size:24})})}),(0,o.jsx)("div",{className:g().timerDisplay,children:I}),(0,o.jsxs)("div",{className:g().moneyDisplay,children:["$",f]}),(0,o.jsx)("div",{className:_().bottomRight,children:(0,o.jsx)("button",{className:h().icon,onClick:i,title:a?"Resume Game ($0)":"Pause Game ($10)",children:a?(0,o.jsx)(c.A,{size:24}):(0,o.jsx)(u.A,{size:24})})}),C&&(0,o.jsx)("div",{className:v().rushHourBanner,children:(0,o.jsx)("div",{className:v().rushHourText,children:"RUSH HOUR"})})]})}let y="wayne_mo_high_score";function w(){try{let e=localStorage.getItem(y);return e?parseInt(e,10):0}catch(e){return console.error("Failed to read high score:",e),0}}var b=n(9382),D=n.n(b),k=n(9939),S=n.n(k);function C(e){let{score:t,onRestart:n}=e,[a,i]=(0,r.useState)(0),[l,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(w());let e=function(e){try{let t=w();if(e>t)return localStorage.setItem(y,e.toString()),console.log("\uD83C\uDFC6 NEW HIGH SCORE: $".concat(e," (previous: $").concat(t,")")),!0;return!1}catch(e){return console.error("Failed to save high score:",e),!1}}(t);s(e),e&&i(t)},[t]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:_().modalOverlay,children:[l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:D().fireworksContainer,children:[...Array(30)].map((e,t)=>{let n=["#ff0000","#00ff00","#0088ff","#ff00ff","#ffff00","#00ffff","#ff8800"],r=n[Math.floor(Math.random()*n.length)];return(0,o.jsx)("div",{className:D().firework,style:{left:"".concat(100*Math.random(),"%"),top:"".concat(20+60*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),animationDuration:"".concat(1+Math.random(),"s"),background:r,boxShadow:"0 0 10px ".concat(r,", 0 0 20px ").concat(r,", 0 0 30px ").concat(r)}},t)})}),(0,o.jsx)("div",{className:D().screenFlash})]}),(0,o.jsxs)("div",{className:l?S().modalContentHighScore:S().modalContent,children:[(0,o.jsx)("h1",{className:S().title,children:"Game Over!"}),(0,o.jsxs)("div",{className:S().scoreSection,children:[(0,o.jsx)("div",{className:S().scoreLabel,children:"Final Score"}),(0,o.jsxs)("div",{className:S().scoreValue,children:["$",t]}),l&&(0,o.jsx)("div",{className:S().newRecord,children:"\uD83C\uDFC6 NEW HIGH SCORE!"})]}),(0,o.jsxs)("div",{className:S().highScoreSection,children:[(0,o.jsx)("div",{className:S().highScoreLabel,children:"High Score"}),(0,o.jsxs)("div",{className:S().highScoreValue,children:["$",a]})]}),(0,o.jsx)("button",{className:S().restartButton,onClick:n,children:"Play Again"})]})]})})}var N=n(2077);let I=(0,a.default)(()=>Promise.all([n.e(367),n.e(413),n.e(268),n.e(288),n.e(443),n.e(411)]).then(n.bind(n,8792)),{loadableGenerated:{webpack:()=>[8792]},ssr:!1,loading:()=>(0,o.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#000",color:"#fff"},children:"Loading game..."})});function j(){let[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(0),[s,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(!0),[h,f]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[_,m]=(0,r.useState)("taxi-1"),[v,y]=(0,r.useState)(300),[w,b]=(0,r.useState)(0),{taxisRef:D,deliveriesRef:k,pickupNodesRef:S,deliveryTimerRef:j,initialSpawnDoneRef:P}=function(){let e=(0,r.useRef)([{id:"taxi-1",state:"driving_to_pickup",path:(0,i.nt)().paths[0]||null,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:100,isReversing:!1,collisionCooldown:0}]),t=(0,r.useRef)([]),n=(0,r.useRef)(1e4),o=(0,r.useRef)([]),a=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{let n=n=>{let{network:r}=n.detail;if(console.log("\uD83D\uDE95 Taxi received road network update:",r),r.paths.length>0&&e.current[0]){let t=r.paths.filter(e=>e.id.startsWith("StarterNode_to_")),n=t.length>0?t[0]:r.paths[0];e.current[0].path=n,e.current[0].t=0,console.log("✅ Taxi spawned at starting path: ".concat(n.id)),console.log("   Available paths: ".concat(r.paths.length)),console.log("   Spawn paths from StarterNode: ".concat(t.length))}if(r.nodes){let e=r.nodes.filter(e=>e.types.includes("pickup"));if(o.current=e,console.log("\uD83D\uDCCD Found ".concat(e.length," pickup nodes")),e.length>=2&&!a.current){for(let n=0;n<3;n++){let n=(0,l.aK)(e,t.current);n&&t.current.push(n)}a.current=!0,console.log("\uD83C\uDFAE Spawned 3 initial deliveries")}}};return window.addEventListener("roadNetworkUpdated",n),()=>{window.removeEventListener("roadNetworkUpdated",n)}},[]),{taxisRef:e,deliveriesRef:t,pickupNodesRef:o,deliveryTimerRef:n,initialSpawnDoneRef:a}}(),M=()=>{let e=(0,i.nt)(),n=e.paths.filter(e=>e.id.startsWith("StarterNode_to_"));D.current=[{id:"taxi-1",state:"driving_to_pickup",path:n.length>0?n[0]:e.paths[0],t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:100,isReversing:!1,collisionCooldown:0}],k.current=[],j.current=1e4,P.current=!1,t(!1),a(0),p(!1),d(!0),m("taxi-1"),y(300),c(e=>e+1)},E=(0,r.useCallback)(()=>{let e=D.current.reduce((e,t)=>e+t.money,0);if(!u&&e<10)return void console.log("❌ Not enough money to pause! Need $".concat(10,", have $").concat(e));!u&&D.current.length>0&&(D.current[0].money-=10,console.log("⏸️ Paused - Deducted $".concat(10))),d(!u)},[u,D]),O=(0,r.useCallback)(e=>{m(t=>t===e?null:e)},[]),T=(0,r.useCallback)(()=>{m(null)},[]),A=(0,r.useCallback)(()=>{if(w<v)return void console.log("❌ Not enough money! Need $".concat(v,", have $").concat(w));let e=(0,i.nt)();if(0===e.paths.length)return void console.warn("⚠️ No paths available to spawn taxi");let t=e.paths.filter(e=>e.id.startsWith("StarterNode_to_")),n=t.length>0?t[0]:e.paths[0],o={id:"taxi-".concat(D.current.length+1),state:"driving_to_pickup",path:n,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:-v,isReversing:!1,collisionCooldown:0};D.current.push(o),console.log("\uD83D\uDE95 Spawned ".concat(o.id," on path ").concat(n.id," for $").concat(v)),y(e=>e+100)},[w,v,D]);return(0,r.useEffect)(()=>{let e=setInterval(()=>{b(D.current.reduce((e,t)=>e+t.money,0))},100);return()=>clearInterval(e)},[D]),(0,r.useEffect)(()=>{let t=t=>{if("h"===t.key.toLowerCase())f(e=>!e);else if(" "!==t.key||e){if(t.key>="1"&&t.key<="9"&&!e){t.preventDefault();let e=parseInt(t.key);if(1===e)m(null);else{let t=e-2;t<D.current.length&&m(D.current[t].id)}}}else t.preventDefault(),E()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,E,D]),(0,o.jsxs)("div",{className:"game-container",children:[(0,o.jsx)(I,{taxisRef:D,deliveriesRef:k,pickupNodesRef:S,deliveryTimerRef:j,isPaused:u,debugMode:h,isRushHour:g,followTaxiId:_}),(0,o.jsxs)("div",{className:"ui-overlay",children:[(0,o.jsx)(x,{taxisRef:D,onGameOver:n=>{e||(a(n),t(!0))},isPaused:u,onTogglePause:E,onRushHourChange:e=>{p(e),console.log("\uD83D\uDEA6 RUSH HOUR ".concat(e?"ACTIVATED":"ENDED"))},onReset:M}),(0,o.jsx)(N.l,{taxisRef:D,onTaxiSelect:O,onResetCamera:T,selectedTaxiId:_,onSpawnTaxi:A,nextTaxiCost:v,canAffordTaxi:w>=v}),h&&(0,o.jsx)("div",{className:"debug-indicator",children:"DEBUG MODE (Press D to toggle)"})]}),e&&(0,o.jsx)(C,{score:n,onRestart:M})]},s)}var P=n(1300),M=n.n(P);function E(e){let{onPlay:t,onTutorial:n}=e,[a,i]=(0,r.useState)(0);return(0,r.useEffect)(()=>{i(w())},[]),(0,o.jsxs)("div",{className:M().introScene,children:[(0,o.jsxs)("div",{className:M().introContent,children:[(0,o.jsx)("h1",{className:M().gameTitle,children:"Wayne Mo"}),(0,o.jsx)("p",{className:M().gameSubtitle,children:'One Man. An Entire "AI" Taxi Fleet'}),(0,o.jsx)("button",{className:M().tutorialButton,onClick:n,children:"HOW TO PLAY"}),a>0&&(0,o.jsxs)("div",{className:M().highScoreDisplay,children:[(0,o.jsx)("div",{className:M().highScoreLabel,children:"High Score"}),(0,o.jsxs)("div",{className:M().highScoreValue,children:["$",a]})]}),(0,o.jsx)("div",{className:M().introHints,children:(0,o.jsx)("p",{children:"Command your autonomous taxi fleet"})})]}),(0,o.jsx)("div",{className:M().buttonContainer,children:(0,o.jsx)("button",{className:M().playButton,onClick:t,children:"PLAY"})})]})}let O=(0,a.default)(()=>Promise.all([n.e(195),n.e(462)]).then(n.bind(n,2462)),{loadableGenerated:{webpack:()=>[2462]},ssr:!1,loading:()=>(0,o.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#000",color:"#fff"},children:"Loading tutorial..."})});function T(){let[e,t]=(0,r.useState)("intro");return"intro"===e?(0,o.jsx)(E,{onPlay:()=>t("game"),onTutorial:()=>t("tutorial")}):"tutorial"===e?(0,o.jsx)(O,{onComplete:()=>t("game")}):(0,o.jsx)(j,{})}},8567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return o.workAsyncStorageInstance}});let o=n(7828)},8615:e=>{e.exports={moneyDisplay:"displays_moneyDisplay__MeL_r",timerDisplay:"displays_timerDisplay__ptjAg",scoreBox:"displays_scoreBox__IpeOw",scoreLabel:"displays_scoreLabel__EixTG",scoreValue:"displays_scoreValue__hpNx3"}},8774:(e,t,n)=>{"use strict";n.d(t,{WF:()=>l,aK:()=>a});var o=n(5339);let r=["#ff1a1a","#ff6a00","#ffb000","#ff00aa","#c400ff","#5a00ff","#004dff","#0019ff","#8b0000","#ff3d00","#ff0099","#9b00ff"];function a(e){var t,n;let o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length<2)return console.warn("⚠️ Not enough pickup nodes to spawn delivery"),null;let i=new Set;a.forEach(e=>{"waiting_pickup"===e.status&&i.add(e.pickupNodeId),"in_transit"===e.status&&i.add(e.dropoffNodeId)});let l=e.filter(e=>!i.has(e.id));if(l.length<2)return console.warn("⚠️ Not enough available pickup nodes (all nodes in use)"),null;let s=l[Math.floor(Math.random()*l.length)],c=e.filter(e=>e.id!==s.id);if(0===c.length)return console.warn("⚠️ No valid dropoff nodes (only one pickup node exists)"),null;let u=c[Math.floor(Math.random()*c.length)];if(s.id===u.id)return console.error("❌ GUARD FAILED: Pickup and dropoff are the same node!"),null;let d=s.position.distanceTo(u.position),h=(null==(t=s.metadata)?void 0:t.payoutMultiplier)||1,f=(null==(n=u.metadata)?void 0:n.payoutMultiplier)||1,g=Math.random();o=d<8?g<.6?1:g<.9?2:3:d<16?g<.2?1:g<.7?2:g<.95?3:4:d<24?g<.1?2:g<.7?3:4:g<.2?3:4;let p=Math.floor((h+f)/2*(100+10*d)),_=new Set(a.map(e=>e.color)),m=r.filter(e=>!_.has(e)),v=m.length>0?m:r,x=v[Math.floor(Math.random()*v.length)],y={id:"delivery-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),pickupNodeId:s.id,dropoffNodeId:u.id,status:"waiting_pickup",spawnTime:Date.now(),payout:p,color:x,multiplier:o,distance:d};return console.log("\uD83D\uDCE6 Spawned delivery: ".concat(s.id," → ").concat(u.id," ($").concat(p,") [").concat(x,"]")),y}function i(e,t,n){for(let o of t.filter(e=>"waiting_pickup"===e.status)){let t=n.find(e=>e.id===o.pickupNodeId);if(t&&1.1>e.distanceTo(t.position))return{event:o,node:t}}return null}function l(e,t,n){let r=[];for(let l of e){if(!l.path)continue;let e=l.path.points;if(e.length<2)continue;let s=1/(e.length-1),c=Math.floor(l.t/s),u=l.t%s/s,d=e[Math.min(c,e.length-2)],h=e[Math.min(c+1,e.length-1)],f=new o.Pq0().lerpVectors(d,h,u);if(l.hasPackage){let e=i(f,t,n);e&&.1>Math.random()&&console.log("\uD83D\uDEAB ".concat(l.id," ignoring pickup ").concat(e.event.id," (already carrying ").concat(l.currentDeliveryId,")"))}else{var a;let e=i(f,t,n);e&&(a=e.event,l.hasPackage=!0,l.currentDeliveryId=a.id,a.status="in_transit",a.claimedByTaxiId=l.id,a.pickupTime=Date.now(),console.log("\uD83D\uDE95 ".concat(l.id," picked up ").concat(a.id," at ").concat(a.pickupNodeId)))}if(l.currentDeliveryId){let e=function(e,t,n,o){let r=n.find(e=>e.id===t&&"in_transit"===e.status);if(!r)return null;let a=o.find(e=>e.id===r.dropoffNodeId);return a&&1.1>e.distanceTo(a.position)?{event:r,node:a}:null}(f,l.currentDeliveryId,t,n);e&&(!function(e,t){e.hasPackage=!1,e.currentDeliveryId=void 0,e.money+=t.payout,t.status="completed",t.deliveryTime=Date.now();let n=((t.deliveryTime-t.spawnTime)/1e3).toFixed(1);console.log("✅ ".concat(e.id," completed ").concat(t.id," at ").concat(t.dropoffNodeId," (+$").concat(t.payout,") in ").concat(n,"s")),t.payout}(l,e.event),r.push(e.event.id))}}return r}},8946:(e,t,n)=>{"use strict";n.d(t,{D3:()=>_,nt:()=>p,WW:()=>g});var o=n(5339),r=n(4510);function a(e){return["North","East","South","West"][e]}let i=[new o.Pq0(-15,.2,-15),new o.Pq0(-15,.2,-5),new o.Pq0(-15,.2,5),new o.Pq0(-15,.2,15)],l=[new o.Pq0(-15,.2,15),new o.Pq0(-5,.2,15),new o.Pq0(5,.2,15),new o.Pq0(15,.2,15)],s=[new o.Pq0(15,.2,15),new o.Pq0(15,.2,5),new o.Pq0(15,.2,-5),new o.Pq0(15,.2,-15)],c=[new o.Pq0(15,.2,-15),new o.Pq0(5,.2,-15),new o.Pq0(-5,.2,-15),new o.Pq0(-15,.2,-15)],u={id:"path-1",points:i,length:(0,r.ac)(i)},d={id:"path-2",points:l,length:(0,r.ac)(l)},h={id:"path-3",points:s,length:(0,r.ac)(s)},f={paths:[u,d,h,{id:"path-4",points:c,length:(0,r.ac)(c)}],nodes:[{id:"node-1",position:new o.Pq0(-15,.2,-15),neighbors:["node-2","node-4",null,null],types:["intersection"]},{id:"node-2",position:new o.Pq0(-15,.2,15),neighbors:[null,"node-3","node-1",null],types:["intersection","pickup"],metadata:{zoneName:"North Terminal",payoutMultiplier:1.2}},{id:"node-3",position:new o.Pq0(15,.2,15),neighbors:[null,null,"node-4","node-2"],types:["intersection","red_light"],metadata:{redLightDuration:3,greenLightDuration:5,currentState:"green"}},{id:"node-4",position:new o.Pq0(15,.2,-15),neighbors:["node-3",null,null,"node-1"],types:["intersection","dropoff"],metadata:{zoneName:"Downtown",payoutMultiplier:1}}]};function g(e){console.log("\uD83D\uDEE3️ Updating road network with ".concat(e.length," extracted nodes"));let t=[],n=new Set;return e.forEach(o=>{let a=[];o.neighbors?(a=o.neighbors.filter(e=>null!==e),console.log("  ".concat(o.id,": topological format, ").concat(a.length," neighbors"))):o.next&&(a=o.next,console.log("  ".concat(o.id,": legacy format, ").concat(a.length," next nodes"))),a.forEach(a=>{let i="".concat(o.id,"_to_").concat(a);if(n.has(i))return;let l=e.find(e=>e.id===a);if(!l)return void console.warn("⚠️ Node ".concat(a," referenced by ").concat(o.id," not found"));let s=[o.position.clone(),l.position.clone()];t.push({id:i,points:s,length:(0,r.ac)(s)}),n.add(i),console.log("  ✅ Created path: ".concat(i))})}),f={nodes:e,paths:t},console.log("✅ Road network updated: ".concat(e.length," nodes, ").concat(t.length," paths")),console.log("\uD83D\uDCCA Network Graph:"),e.forEach(e=>{e.neighbors?console.log("  ".concat(e.id," [TOPO] → N:").concat(e.neighbors[0]||"-",", E:").concat(e.neighbors[1]||"-",", S:").concat(e.neighbors[2]||"-",", W:").concat(e.neighbors[3]||"-")):e.next&&console.log("  ".concat(e.id," [LEGACY] → [").concat(e.next.join(", "),"]"))}),console.log("\uD83D\uDEE3️ Generated Paths:"),t.forEach(e=>{console.log("  ".concat(e.id," (").concat(e.length.toFixed(2)," units)"))}),f}function p(){return f}function _(e,t,n){let r=f.paths,i=f.nodes,l=e.split("_to_");if(2!==l.length)return console.warn("⚠️ Invalid path ID format: ".concat(e)),null;let s=l[0],c=l[1],u=i.find(e=>e.id===c);if(!u)return console.warn("⚠️ Destination node ".concat(c," not found")),null;if(u.neighbors&&n){var d;let e;for(let t=0;t<4;t++)if(u.neighbors[t]===s){e=t;break}void 0===e&&console.warn("⚠️ Could not calculate incomingDir for ".concat(s," → ").concat(c,", using fallback"));let o=null!=(d=null!=e?e:n.incomingDir)?d:0,i=u.types.includes("intersection")?null==t?void 0:t.get(c):void 0,l=(null==i?void 0:i.mode)||"pass_through",h=function(e,t,n){if(!e.neighbors||4!==e.neighbors.length)return console.warn("⚠️ Node ".concat(e.id," is not a valid intersection (no neighbors array)")),{nextId:null,outgoingDir:null};let o=e.neighbors.filter(e=>null!==e).length;if(1===o){let n=e.neighbors[t];if(n)return console.log("⚠️ ".concat(e.id,": Dead end, U-turn back → ").concat(n)),{nextId:n,outgoingDir:t}}if(2===o)for(let n=0;n<4;n++){let o=n;if(o!==t&&null!==e.neighbors[o]){let n=e.neighbors[o];return console.log("\uD83D\uDD04 ".concat(e.id,": Corner, Incoming ").concat(a(t)," → ").concat(a(o)," → ").concat(n)),{nextId:n,outgoingDir:o}}}for(let o of function(e,t){if(2===e)switch(t){case"pass_through":return[0,1,2,3];case"turn_right":return[1,2,3,0];case"turn_left":return[3,2,1,0]}else if(0===e)switch(t){case"pass_through":return[2,3,0,1];case"turn_right":return[3,0,1,2];case"turn_left":return[1,0,3,2]}else if(3===e)switch(t){case"pass_through":return[1,2,3,0];case"turn_right":return[2,3,0,1];case"turn_left":return[0,3,2,1]}else switch(t){case"pass_through":return[3,0,1,2];case"turn_right":return[0,1,2,3];case"turn_left":return[2,1,0,3]}}(t,n)){if(o===t)continue;let r=e.neighbors[o];if(null!==r)return console.log("✅ ".concat(e.id,": Incoming ").concat(a(t),", Mode ").concat(n,", Chose ").concat(a(o)," → ").concat(r)),{nextId:r,outgoingDir:o}}return console.warn("⚠️ ".concat(e.id,": No available path from ").concat(a(t)," with mode ").concat(n)),{nextId:null,outgoingDir:null}}(u,o,l);if(!h.nextId||null===h.outgoingDir)return console.warn("⚠️ No available route from ".concat(c)),null;{let e=r.find(e=>e.id==="".concat(c,"_to_").concat(h.nextId));if(!e)return console.warn("⚠️ Path ".concat(c,"_to_").concat(h.nextId," not found in network")),null;{let t=(h.outgoingDir+2)%4;return n.currentIntersectionId=c,n.incomingDir=t,console.log("\uD83D\uDEA6 ".concat(c,": Mode ").concat(l,", In ").concat(a(o)," → Out ").concat(a(h.outgoingDir)," → ").concat(h.nextId)),e}}}let h=r.filter(e=>e.id.startsWith("".concat(c,"_to_")));if(0===h.length)return console.warn("⚠️ No next path found from node: ".concat(c)),null;if(1===h.length)return h[0];if(u.types.includes("intersection")&&t){let n=t.get(c);if(n){let t=function(e,t,n){let r=n.filter(e=>e.id.startsWith("".concat(t.id,"_to_"))),a=n.find(t=>t.id===e);if(!a)return console.warn("⚠️ Incoming path ".concat(e," not found")),{straight:null,left:null,right:null};if(1===r.length)return{straight:r[0].id,left:null,right:null};let i={straight:null,left:null,right:null};return r.forEach(e=>{let n=function(e,t,n){let r=new o.Pq0().subVectors(e.points[e.points.length-1],e.points[e.points.length-2]).normalize(),a=new o.Pq0().subVectors(n.points[1],n.points[0]).normalize(),i=new o.Pq0().crossVectors(r,a);return r.dot(a)>.8?"straight":i.y>.1?"left":i.y<-.1?"right":"straight"}(a,0,e);i[n]?console.warn('⚠️ Multiple paths detected as "'.concat(n,'" at ').concat(t.id)):i[n]=e.id}),console.log("\uD83D\uDCCD Path categorization at ".concat(t.id,":"),{incoming:e,straight:i.straight,left:i.left,right:i.right}),i}(e,u,r),a=null;switch(n.mode){case"pass_through":a=t.straight;break;case"turn_left":a=t.left;break;case"turn_right":a=t.right}if(a){let e=r.find(e=>e.id===a);if(e)return console.log("\uD83D\uDEA6 Path-based routing at ".concat(c,": ").concat(n.mode," → ").concat(a)),e}if(t.straight){let e=r.find(e=>e.id===t.straight);if(e)return console.warn("⚠️ Intersection ".concat(c,': mode "').concat(n.mode,'" not available, using straight')),e}}}let g=Math.floor(Math.random()*h.length);return console.log("\uD83C\uDFB2 Random path selection at ".concat(c,": ").concat(h[g].id)),h[g]}},9135:e=>{e.exports={topLeft:"positioning_topLeft__Vyza8",topRight:"positioning_topRight__itKZW",bottomLeft:"positioning_bottomLeft__eTzG1",bottomRight:"positioning_bottomRight__yPGpJ",topCenter:"positioning_topCenter__MhAGC",bottomCenter:"positioning_bottomCenter__Q8ZUS",centerScreen:"positioning_centerScreen__ICv38",fullscreenOverlay:"positioning_fullscreenOverlay__LlfHl",modalOverlay:"positioning_modalOverlay__h1LUH",fullscreenScene:"positioning_fullscreenScene__bCshz"}},9382:e=>{e.exports={fireworksContainer:"effects_fireworksContainer__ij92O",firework:"effects_firework__Aqz1J",fireworkExplode:"effects_fireworkExplode__OCC5c",screenFlash:"effects_screenFlash__czYvK",flashPulse:"effects_flashPulse__yu_re"}},9939:e=>{e.exports={modalContent:"GameOverModal_modalContent__kF_Jg",modalContentHighScore:"GameOverModal_modalContentHighScore__X5xN_ GameOverModal_modalContent__kF_Jg",glowBorder:"GameOverModal_glowBorder__UihkC",title:"GameOverModal_title__LKc1X",scoreSection:"GameOverModal_scoreSection__6XOqi",scoreLabel:"GameOverModal_scoreLabel__vLL_G",scoreValue:"GameOverModal_scoreValue___UFkW",newRecord:"GameOverModal_newRecord__kBU7d",recordPulse:"GameOverModal_recordPulse__LOcWu",highScoreSection:"GameOverModal_highScoreSection__UloPm",highScoreLabel:"GameOverModal_highScoreLabel__UsNuL",highScoreValue:"GameOverModal_highScoreValue__2kqDm",restartButton:"GameOverModal_restartButton__qJDmU"}}},e=>{e.O(0,[128,831,441,255,358],()=>e(e.s=8164)),_N_E=e.O()}]);