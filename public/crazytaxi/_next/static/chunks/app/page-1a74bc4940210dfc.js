(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4510:(e,t,n)=>{"use strict";n.d(t,{E$:()=>i,KQ:()=>r,ac:()=>c});var a=n(5339),o=n(8946);function i(e,t,n){if("stopped"===e.state||!e.path)return;let a=t*e.speed/e.path.length;e.isReversing?(e.t-=a,e.t<=0&&(e.t=0,e.isReversing=!1,console.log("✅ ".concat(e.id," finished reversing, back at start of path")),function(e,t){if(!e.path)return;let n=e.path.id,a=n.split("_to_");if(2!==a.length)return console.warn("⚠️ Invalid path ID format: ".concat(n));let i=a[0],r=a[1],c="".concat(r,"_to_").concat(i);console.log("\uD83D\uDD04 ".concat(e.id," at ").concat(i,", routing from here (was reversing on ").concat(n,")"));let s=(0,o.D3)(c,t,e);s?(console.log("\uD83D\uDE95 Post-reversal transition: ".concat(i," → ").concat(s.id)),e.path=s,e.t=0):console.warn("⚠️ No next path found from ".concat(i," after reversal"))}(e,n))):(e.t+=a,e.t>=1&&(e.t=1,function(e,t){if(!e.path)return;let n=e.path.id,a=n.split("_to_");2===a.length&&(e.previousNodeId=a[0]);let i=(0,o.D3)(n,t,e);i?(console.log("\uD83D\uDE95 Path transition: ".concat(n," → ").concat(i.id)),e.path=i,e.t=0):console.warn("⚠️ No next path found for ".concat(n))}(e,n)))}function r(e,t){if(0===e.points.length)return new a.Pq0;if(1===e.points.length)return e.points[0].clone();let n=Math.max(0,Math.min(1,t)),o=Math.floor(n*(e.points.length-1)),i=Math.min(o+1,e.points.length-1),r=n*(e.points.length-1)%1;return e.points[o].clone().lerp(e.points[i],r)}function c(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].distanceTo(e[n+1]);return t}},6795:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var a=n(5155),o=n(2115),i=n(8661),r=n.n(i),c=n(7909),s=n(8946),d=n(8774);function l(e){let{taxisRef:t,onGameOver:n,isPaused:i,onTogglePause:c,onRushHourChange:d}=e,[l,f]=(0,o.useState)(0),[p,x]=(0,o.useState)(1),[u,h]=(0,o.useState)(300),[g,b]=(0,o.useState)(120),[m,j]=(0,o.useState)(0),[w,v]=(0,o.useState)(Date.now()),[y,k]=(0,o.useState)(!1),[D,N]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=setInterval(()=>{let e=t.current.reduce((e,t)=>e+t.money,0);if(f(e),x(t.current.length),i)v(Date.now());else{let t=Date.now(),a=(t-w)/1e3;v(t);let o=m+a;j(o);let i=Math.max(0,120-o);b(i),i<=30&&i>0&&!y&&(k(!0),N(!0),null==d||d(!0),setTimeout(()=>{N(!1)},3e3)),i<=0&&n(e)}},100);return()=>clearInterval(e)},[t,n,i,m,w]);let z=l>=u,I=Math.floor(g);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"jsx-e4d0dc9c3cf935cb top-bar",children:(0,a.jsxs)("button",{onClick:()=>{if(l<u)return void console.log("❌ Not enough money! Need $".concat(u,", have $").concat(l));let e=(0,s.nt)();if(0===e.paths.length)return void console.warn("⚠️ No paths available to spawn taxi");let n=e.paths.filter(e=>e.id.includes("Intersection")),a=n.length>0?n[Math.floor(Math.random()*n.length)]:e.paths[0],o={id:"taxi-".concat(t.current.length+1),state:"driving_to_pickup",path:a,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:-u,isReversing:!1,collisionCooldown:0};t.current.push(o),console.log("\uD83D\uDE95 Spawned ".concat(o.id," on path ").concat(a.id," for $").concat(u)),h(u+100)},disabled:!z,className:"jsx-e4d0dc9c3cf935cb spawn-button",children:["+ Taxi ($",u,")"]})}),(0,a.jsx)("div",{className:"jsx-e4d0dc9c3cf935cb timer-display",children:I}),(0,a.jsxs)("div",{className:"jsx-e4d0dc9c3cf935cb money-display",children:["$",l]}),(0,a.jsx)("div",{className:"jsx-e4d0dc9c3cf935cb pause-container",children:(0,a.jsx)("button",{onClick:c,className:"jsx-e4d0dc9c3cf935cb pause-button",children:i?"▶":"❚❚"})}),D&&(0,a.jsx)("div",{className:"jsx-e4d0dc9c3cf935cb rush-hour-banner",children:(0,a.jsx)("div",{className:"jsx-e4d0dc9c3cf935cb rush-hour-text",children:"RUSH HOUR"})}),(0,a.jsx)(r(),{id:"e4d0dc9c3cf935cb",children:'.top-bar.jsx-e4d0dc9c3cf935cb{position:fixed;top:20px;left:20px;pointer-events:auto;z-index:100}.spawn-button.jsx-e4d0dc9c3cf935cb{font-size:18px;font-weight:bold;padding:8px 16px;background:#0f0;color:#000;border:none;border-radius:4px;cursor:pointer;font-family:monospace;transition:all.2s}.spawn-button.jsx-e4d0dc9c3cf935cb:hover{background:#0d0;transform:scale(1.05)}.spawn-button.jsx-e4d0dc9c3cf935cb:active{transform:scale(.95)}.spawn-button.jsx-e4d0dc9c3cf935cb:disabled{background:#666;color:#999;cursor:not-allowed;transform:none}.spawn-button.jsx-e4d0dc9c3cf935cb:disabled:hover{background:#666;transform:none}.timer-display.jsx-e4d0dc9c3cf935cb{position:fixed;top:20px;left:50%;transform:translatex(-50%);font-size:32px;font-weight:bold;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8);font-family:monospace;padding:8px 16px;border-radius:4px;min-width:80px;text-align:center;background:rgba(0,0,0,.5);pointer-events:none;z-index:100}.pause-container.jsx-e4d0dc9c3cf935cb{position:fixed;bottom:20px;right:20px;pointer-events:auto;z-index:100}.pause-button.jsx-e4d0dc9c3cf935cb{font-size:24px;font-weight:bold;padding:10px 16px;background:rgba(255,255,255,.9);color:#000;border:2px solid#000;border-radius:8px;cursor:pointer;font-family:monospace;transition:all.2s;min-width:60px;height:50px;display:flex;align-items:center;justify-content:center}.pause-button.jsx-e4d0dc9c3cf935cb:hover{background:#fff;transform:scale(1.05)}.pause-button.jsx-e4d0dc9c3cf935cb:active{transform:scale(.95)}.money-display.jsx-e4d0dc9c3cf935cb{position:fixed;top:20px;right:20px;font-size:32px;font-weight:bold;color:#ff0;text-shadow:2px 2px 4px rgba(0,0,0,.8);font-family:monospace;pointer-events:none;z-index:100}.rush-hour-banner.jsx-e4d0dc9c3cf935cb{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#f00,#f80,#f00);padding:40px 80px;border-radius:20px;border:6px solid#ff0;box-shadow:0 0 40px rgba(255,0,0,.8),inset 0 0 20px rgba(255,255,0,.5);pointer-events:none;z-index:200;animation:rushHourPulse.5s ease-in-out infinite alternate,rushHourZoom.3s ease-out}.rush-hour-text.jsx-e4d0dc9c3cf935cb{font-size:80px;font-weight:bold;color:#fff;text-shadow:4px 4px 8px rgba(0,0,0,.9),0 0 20px#ff0,0 0 40px#f80;font-family:"Impact",monospace;letter-spacing:8px}@keyframes rushHourPulse{from{transform:translate(-50%,-50%)scale(1)}to{transform:translate(-50%,-50%)scale(1.05)}}@keyframes rushHourZoom{from{transform:translate(-50%,-50%)scale(.5);opacity:0}to{transform:translate(-50%,-50%)scale(1);opacity:1}}@media(max-width:768px){.top-bar.jsx-e4d0dc9c3cf935cb{top:10px;left:10px}.spawn-button.jsx-e4d0dc9c3cf935cb{font-size:14px;padding:6px 12px}.timer-display.jsx-e4d0dc9c3cf935cb{top:10px;font-size:24px;padding:6px 12px;min-width:60px}.money-display.jsx-e4d0dc9c3cf935cb{top:10px;right:10px;font-size:24px}.pause-container.jsx-e4d0dc9c3cf935cb{bottom:10px;right:10px}.pause-button.jsx-e4d0dc9c3cf935cb{font-size:20px;padding:8px 12px;min-width:50px;height:40px}.rush-hour-banner.jsx-e4d0dc9c3cf935cb{padding:20px 40px;border:4px solid#ff0}.rush-hour-text.jsx-e4d0dc9c3cf935cb{font-size:48px;letter-spacing:4px}}'})]})}function f(e){let{score:t,onRestart:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"jsx-2b318a3b15909e7c modal-overlay",children:(0,a.jsxs)("div",{className:"jsx-2b318a3b15909e7c modal-content",children:[(0,a.jsx)("h1",{className:"jsx-2b318a3b15909e7c title",children:"Game Over!"}),(0,a.jsxs)("div",{className:"jsx-2b318a3b15909e7c score-section",children:[(0,a.jsx)("div",{className:"jsx-2b318a3b15909e7c score-label",children:"Final Score"}),(0,a.jsxs)("div",{className:"jsx-2b318a3b15909e7c score-value",children:["$",t]})]}),(0,a.jsx)("button",{onClick:n,className:"jsx-2b318a3b15909e7c restart-button",children:"Play Again"})]})}),(0,a.jsx)(r(),{id:"2b318a3b15909e7c",children:".modal-overlay.jsx-2b318a3b15909e7c{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:1000;pointer-events:auto}.modal-content.jsx-2b318a3b15909e7c{background:#1a1a1a;border:4px solid#0f0;border-radius:8px;padding:48px 64px;display:flex;flex-direction:column;align-items:center;gap:32px;box-shadow:0 0 40px rgba(0,255,0,.3)}.title.jsx-2b318a3b15909e7c{font-size:48px;font-weight:bold;color:#0f0;margin:0;font-family:monospace;text-shadow:0 0 10px rgba(0,255,0,.5)}.score-section.jsx-2b318a3b15909e7c{display:flex;flex-direction:column;align-items:center;gap:8px}.score-label.jsx-2b318a3b15909e7c{font-size:24px;color:#fff;font-family:monospace}.score-value.jsx-2b318a3b15909e7c{font-size:64px;font-weight:bold;color:#ff0;font-family:monospace;text-shadow:0 0 10px rgba(255,255,0,.5)}.restart-button.jsx-2b318a3b15909e7c{font-size:24px;font-weight:bold;padding:16px 48px;background:#0f0;color:#000;border:none;border-radius:4px;cursor:pointer;font-family:monospace;transition:all.2s}.restart-button.jsx-2b318a3b15909e7c:hover{background:#0d0;transform:scale(1.05)}.restart-button.jsx-2b318a3b15909e7c:active{transform:scale(.95)}"})]})}var p=n(9068),x=n(7944);function u(e){let{taxisRef:t,onTaxiSelect:n,onResetCamera:o,selectedTaxiId:i}=e,c=t.current;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jsx-6c8a995c968c5d56 taxi-controls",children:[(0,a.jsx)("button",{onClick:o,title:"Reset Camera to Center",className:"jsx-6c8a995c968c5d56 "+"taxi-icon globe-icon ".concat(i?"":"active"),children:(0,a.jsx)(p.A,{size:24})}),(0,a.jsx)("div",{className:"jsx-6c8a995c968c5d56 separator"}),c.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>n(e.id),title:"Follow ".concat(e.id),className:"jsx-6c8a995c968c5d56 "+"taxi-icon ".concat(i===e.id?"active":""),children:[(0,a.jsx)(x.A,{size:24}),(0,a.jsx)("span",{className:"jsx-6c8a995c968c5d56 taxi-number",children:t+1})]},e.id))]}),(0,a.jsx)(r(),{id:"6c8a995c968c5d56",children:".taxi-controls.jsx-6c8a995c968c5d56{position:fixed;bottom:80px;left:20px;display:flex;flex-direction:column;gap:8px;pointer-events:auto;z-index:100}.taxi-icon.jsx-6c8a995c968c5d56{position:relative;width:50px;height:50px;background:rgba(255,255,255,.9);border:2px solid#333;border-radius:8px;cursor:pointer;transition:all.2s;display:flex;align-items:center;justify-content:center;padding:0}.taxi-icon.jsx-6c8a995c968c5d56:hover{background:#fff;transform:scale(1.1);border-color:#0f0}.taxi-icon.active.jsx-6c8a995c968c5d56{background:#0f0;border-color:#0a0;box-shadow:0 0 10px rgba(0,255,0,.5)}.taxi-icon.active.jsx-6c8a995c968c5d56:hover{background:#0d0}.taxi-icon.globe-icon.jsx-6c8a995c968c5d56{border-color:#08f}.taxi-icon.globe-icon.jsx-6c8a995c968c5d56:hover{border-color:#08f;box-shadow:0 0 8px rgba(0,136,255,.4)}.taxi-icon.globe-icon.active.jsx-6c8a995c968c5d56{background:#08f;border-color:#06c;box-shadow:0 0 10px rgba(0,136,255,.5)}.separator.jsx-6c8a995c968c5d56{width:100%;height:2px;background:rgba(255,255,255,.3);margin:4px 0}.taxi-number.jsx-6c8a995c968c5d56{position:absolute;bottom:2px;right:4px;font-size:10px;font-weight:bold;background:rgba(0,0,0,.7);color:white;padding:2px 4px;border-radius:3px;font-family:monospace}@media(max-width:768px){.taxi-controls.jsx-6c8a995c968c5d56{bottom:60px;left:10px;gap:6px}.taxi-icon.jsx-6c8a995c968c5d56{width:40px;height:40px}.taxi-number.jsx-6c8a995c968c5d56{font-size:8px;padding:1px 3px}}"})]})}let h=(0,c.default)(()=>Promise.all([n.e(367),n.e(413),n.e(937),n.e(584)]).then(n.bind(n,8584)),{loadableGenerated:{webpack:()=>[8584]},ssr:!1,loading:()=>(0,a.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#000",color:"#fff"},children:"Loading game..."})});function g(){let[e,t]=(0,o.useState)(!1),[n,i]=(0,o.useState)(0),[c,p]=(0,o.useState)(0),[x,g]=(0,o.useState)(!1),[b,m]=(0,o.useState)(!1),[j,w]=(0,o.useState)(!1),[v,y]=(0,o.useState)(null),{taxisRef:k,deliveriesRef:D,pickupNodesRef:N,deliveryTimerRef:z,initialSpawnDoneRef:I}=function(){let e=(0,o.useRef)([{id:"taxi-1",state:"driving_to_pickup",path:(0,s.nt)().paths[0]||null,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:100,isReversing:!1,collisionCooldown:0}]),t=(0,o.useRef)([]),n=(0,o.useRef)(1e4),a=(0,o.useRef)([]),i=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{let n=n=>{let{network:o}=n.detail;if(console.log("\uD83D\uDE95 Taxi received road network update:",o),o.paths.length>0&&e.current[0]){let t=o.paths.filter(e=>e.id.includes("Intersection")),n=t.length>0?t[0]:o.paths[0];e.current[0].path=n,e.current[0].t=0,console.log("✅ Taxi updated to starting path: ".concat(n.id)),console.log("   Available paths: ".concat(o.paths.length)),console.log("   Intersection paths: ".concat(t.length))}if(o.nodes){let e=o.nodes.filter(e=>e.types.includes("pickup"));if(a.current=e,console.log("\uD83D\uDCCD Found ".concat(e.length," pickup nodes")),e.length>=2&&!i.current){for(let n=0;n<3;n++){let n=(0,d.aK)(e,t.current);n&&t.current.push(n)}i.current=!0,console.log("\uD83C\uDFAE Spawned 3 initial deliveries")}}};return window.addEventListener("roadNetworkUpdated",n),()=>{window.removeEventListener("roadNetworkUpdated",n)}},[]),{taxisRef:e,deliveriesRef:t,pickupNodesRef:a,deliveryTimerRef:n,initialSpawnDoneRef:i}}(),_=(0,o.useCallback)(()=>{let e=k.current.reduce((e,t)=>e+t.money,0);if(!x&&e<10)return void console.log("❌ Not enough money to pause! Need $".concat(10,", have $").concat(e));!x&&k.current.length>0&&(k.current[0].money-=10,console.log("⏸️ Paused - Deducted $".concat(10))),g(!x)},[x,k]),P=(0,o.useCallback)(e=>{y(t=>t===e?null:e)},[]),E=(0,o.useCallback)(()=>{y(null)},[]);return(0,o.useEffect)(()=>{let t=t=>{"h"===t.key.toLowerCase()?m(e=>!e):" "!==t.key||e||(t.preventDefault(),_())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,_]),(0,a.jsxs)("div",{className:"jsx-34ff5652e9ed6491 game-container",children:[(0,a.jsx)(h,{taxisRef:k,deliveriesRef:D,pickupNodesRef:N,deliveryTimerRef:z,isPaused:x,debugMode:b,isRushHour:j,followTaxiId:v}),(0,a.jsxs)("div",{className:"jsx-34ff5652e9ed6491 ui-overlay",children:[(0,a.jsx)(l,{taxisRef:k,onGameOver:n=>{e||(i(n),t(!0))},isPaused:x,onTogglePause:_,onRushHourChange:e=>{w(e),console.log("\uD83D\uDEA6 RUSH HOUR ".concat(e?"ACTIVATED":"ENDED"))}}),(0,a.jsx)(u,{taxisRef:k,onTaxiSelect:P,onResetCamera:E,selectedTaxiId:v}),b&&(0,a.jsx)("div",{className:"jsx-34ff5652e9ed6491 debug-indicator",children:"DEBUG MODE (Press D to toggle)"})]}),e&&(0,a.jsx)(f,{score:n,onRestart:()=>{k.current=[{id:"taxi-1",state:"driving_to_pickup",path:(0,s.nt)().paths[0]||null,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:100,isReversing:!1,collisionCooldown:0}],D.current=[],z.current=1e4,I.current=!1,t(!1),i(0),w(!1),p(e=>e+1)}}),(0,a.jsx)(r(),{id:"34ff5652e9ed6491",children:".game-container.jsx-34ff5652e9ed6491{position:relative;width:100vw;height:100vh;overflow:hidden}.ui-overlay.jsx-34ff5652e9ed6491{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;padding:2rem}.debug-indicator.jsx-34ff5652e9ed6491{position:fixed;top:70px;right:20px;background:rgba(255,0,0,.8);color:white;padding:8px 16px;border-radius:4px;font-family:monospace;font-size:14px;font-weight:bold;pointer-events:auto;z-index:100}@media(max-width:768px){.debug-indicator.jsx-34ff5652e9ed6491{top:60px;right:10px;font-size:12px;padding:6px 12px}}@media(max-width:480px){.debug-indicator.jsx-34ff5652e9ed6491{top:55px;right:10px;font-size:10px;padding:4px 8px}}"})]},c)}var b=n(5239);let m=[{image:"/tutorial_01.png",text:"Click intersections to control taxi routing. Green + for straight, blue ↶ for left, orange ↷ for right."},{image:"/tutorial_02.png",text:"Taxis automatically pick up colored packages and deliver them to matching colored destinations."},{image:"/tutorial_03.png",text:"Earn money from deliveries. Earn more tips for being timely. You have 120 seconds!"}];function j(){let[e,t]=(0,o.useState)(0);return(0,a.jsxs)("div",{className:"jsx-8cd70a4ab5e0015b tutorial-slider",children:[(0,a.jsxs)("div",{className:"jsx-8cd70a4ab5e0015b slider-content",children:[(0,a.jsx)("button",{onClick:()=>{t(e=>(e-1+m.length)%m.length)},className:"jsx-8cd70a4ab5e0015b arrow arrow-left",children:"‹"}),(0,a.jsxs)("div",{className:"jsx-8cd70a4ab5e0015b slide",children:[(0,a.jsx)("div",{className:"jsx-8cd70a4ab5e0015b slide-image",children:(0,a.jsx)(b.default,{src:m[e].image,alt:"Tutorial step ".concat(e+1),width:600,height:400,style:{objectFit:"contain",width:"100%",height:"auto",maxHeight:"100%"},priority:!0})}),(0,a.jsx)("p",{className:"jsx-8cd70a4ab5e0015b slide-text",children:m[e].text})]}),(0,a.jsx)("button",{onClick:()=>{t(e=>(e+1)%m.length)},className:"jsx-8cd70a4ab5e0015b arrow arrow-right",children:"›"})]}),(0,a.jsx)("div",{className:"jsx-8cd70a4ab5e0015b dots",children:m.map((n,o)=>(0,a.jsx)("button",{onClick:()=>{t(o)},"aria-label":"Go to slide ".concat(o+1),className:"jsx-8cd70a4ab5e0015b "+"dot ".concat(o===e?"active":"")},o))}),(0,a.jsx)(r(),{id:"8cd70a4ab5e0015b",children:".tutorial-slider.jsx-8cd70a4ab5e0015b{width:100%;max-width:700px;margin:2rem auto}.slider-content.jsx-8cd70a4ab5e0015b{display:flex;align-items:center;gap:1rem;position:relative}.arrow.jsx-8cd70a4ab5e0015b{background:rgba(255,255,255,.2);border:2px solid rgba(255,255,255,.5);color:white;font-size:3rem;width:50px;height:50px;border-radius:50%;cursor:pointer;transition:all.2s;display:flex;align-items:center;justify-content:center;padding:0;padding-bottom:4px;flex-shrink:0;line-height:0;font-family:Arial,sans-serif}.arrow.jsx-8cd70a4ab5e0015b:hover{background:rgba(255,255,255,.4);transform:scale(1.1)}.arrow.jsx-8cd70a4ab5e0015b:active{transform:scale(.95)}.slide.jsx-8cd70a4ab5e0015b{flex:1;text-align:center}.slide-image.jsx-8cd70a4ab5e0015b{background:rgba(0,0,0,.3);border-radius:8px;padding:1rem;margin-bottom:1rem;min-height:400px;max-height:500px;display:flex;align-items:center;justify-content:center;overflow:hidden}.slide-text.jsx-8cd70a4ab5e0015b{color:white;font-size:1.1rem;line-height:1.6;margin:0;padding:0 2rem;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.dots.jsx-8cd70a4ab5e0015b{display:flex;justify-content:center;gap:.75rem;margin-top:1.5rem}.dot.jsx-8cd70a4ab5e0015b{width:12px;height:12px;border-radius:50%;background:rgba(255,255,255,.3);border:2px solid rgba(255,255,255,.5);cursor:pointer;transition:all.3s;padding:0}.dot.jsx-8cd70a4ab5e0015b:hover{background:rgba(255,255,255,.5);transform:scale(1.2)}.dot.active.jsx-8cd70a4ab5e0015b{background:#ff0;border-color:#ff6b00;transform:scale(1.3)}@media(max-width:768px){.tutorial-slider.jsx-8cd70a4ab5e0015b{max-width:95%;margin:1rem auto}.slider-content.jsx-8cd70a4ab5e0015b{gap:.5rem}.arrow.jsx-8cd70a4ab5e0015b{font-size:2rem;width:40px;height:40px;line-height:0;padding-bottom:3px}.slide-image.jsx-8cd70a4ab5e0015b{min-height:200px;max-height:300px;padding:.5rem}.slide-text.jsx-8cd70a4ab5e0015b{font-size:.9rem;padding:0 .5rem;line-height:1.4}.dots.jsx-8cd70a4ab5e0015b{margin-top:1rem}}@media(max-width:480px){.tutorial-slider.jsx-8cd70a4ab5e0015b{max-width:100%;margin:.5rem auto}.slider-content.jsx-8cd70a4ab5e0015b{gap:.25rem}.arrow.jsx-8cd70a4ab5e0015b{font-size:1.5rem;width:36px;height:36px;line-height:0;padding-bottom:2px;border:1.5px solid rgba(255,255,255,.5)}.slide-image.jsx-8cd70a4ab5e0015b{min-height:150px;max-height:200px;padding:.25rem;border-radius:6px}.slide-text.jsx-8cd70a4ab5e0015b{font-size:.75rem;padding:0 .25rem;line-height:1.3}.dots.jsx-8cd70a4ab5e0015b{gap:.4rem;margin-top:.75rem}.dot.jsx-8cd70a4ab5e0015b{width:8px;height:8px;border:1.5px solid rgba(255,255,255,.5)}.dot.active.jsx-8cd70a4ab5e0015b{transform:scale(1.2)}}@media(max-width:360px){.arrow.jsx-8cd70a4ab5e0015b{font-size:1.25rem;width:32px;height:32px}.slide-image.jsx-8cd70a4ab5e0015b{min-height:120px;max-height:160px}.slide-text.jsx-8cd70a4ab5e0015b{font-size:.7rem}}"})]})}function w(e){let{onPlay:t}=e;return(0,a.jsxs)("div",{className:"jsx-cf5aa5d5172292ba intro-scene",children:[(0,a.jsxs)("div",{className:"jsx-cf5aa5d5172292ba intro-content",children:[(0,a.jsx)("h1",{className:"jsx-cf5aa5d5172292ba game-title",children:"Wayne Mo"}),(0,a.jsx)("p",{className:"jsx-cf5aa5d5172292ba game-subtitle",children:"AI MANAGEMENT AUTOMATION"}),(0,a.jsxs)("div",{className:"jsx-cf5aa5d5172292ba tutorial-section",children:[(0,a.jsx)("h2",{className:"jsx-cf5aa5d5172292ba tutorial-title",children:"How to Play"}),(0,a.jsx)(j,{})]}),(0,a.jsx)("button",{onClick:t,className:"jsx-cf5aa5d5172292ba play-button",children:"PLAY"}),(0,a.jsx)("div",{className:"jsx-cf5aa5d5172292ba intro-hints",children:(0,a.jsx)("p",{className:"jsx-cf5aa5d5172292ba",children:"Command your autonomous taxi fleet"})})]}),(0,a.jsx)(r(),{id:"cf5aa5d5172292ba",children:".intro-scene.jsx-cf5aa5d5172292ba{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;flex-direction:column;align-items:center;justify-content:flex-start;z-index:1000;overflow-y:auto;overflow-x:hidden;padding:2rem 1rem;-webkit-overflow-scrolling:touch}.intro-content.jsx-cf5aa5d5172292ba{text-align:center;color:white;animation:fadeIn 1s ease-in;margin-bottom:2rem;width:100%;max-width:1200px}.tutorial-section.jsx-cf5aa5d5172292ba{width:100%;max-width:800px;margin:2rem auto 0;animation:fadeIn 1.5s ease-in}.tutorial-title.jsx-cf5aa5d5172292ba{color:#ff0;font-size:2rem;font-weight:900;text-align:center;margin-bottom:1rem;text-shadow:2px 2px 4px rgba(0,0,0,.3);-webkit-text-stroke:1px#ff6b00}.game-title.jsx-cf5aa5d5172292ba{font-size:4rem;font-weight:900;letter-spacing:.2em;margin:0;text-shadow:4px 4px 8px rgba(0,0,0,.3);color:#ff0;-webkit-text-stroke:2px#ff6b00}.game-subtitle.jsx-cf5aa5d5172292ba{font-size:1.2rem;letter-spacing:.3em;margin:1rem 0 3rem;opacity:.9}.play-button.jsx-cf5aa5d5172292ba{background:#ff0;color:#000;border:4px solid#ff6b00;padding:1.5rem 4rem;font-size:2rem;font-weight:900;letter-spacing:.2em;cursor:pointer;transition:all.3s ease;box-shadow:0 8px 16px rgba(0,0,0,.3);border-radius:8px}.play-button.jsx-cf5aa5d5172292ba:hover{transform:translatey(-4px)scale(1.05);box-shadow:0 12px 24px rgba(0,0,0,.4);background:#fff200}.play-button.jsx-cf5aa5d5172292ba:active{transform:translatey(-2px)scale(1.02)}.intro-hints.jsx-cf5aa5d5172292ba{margin-top:3rem;opacity:.7}.intro-hints.jsx-cf5aa5d5172292ba p.jsx-cf5aa5d5172292ba{margin:.5rem 0;font-size:1rem}@keyframes fadeIn{from{opacity:0;transform:translatey(20px)}to{opacity:1;transform:translatey(0)}}@media(max-width:768px){.intro-scene.jsx-cf5aa5d5172292ba{padding:1rem .5rem}.game-title.jsx-cf5aa5d5172292ba{font-size:2.5rem;letter-spacing:.1em;-webkit-text-stroke:1.5px#ff6b00}.game-subtitle.jsx-cf5aa5d5172292ba{font-size:.9rem;letter-spacing:.2em;margin:.5rem 0 1.5rem}.play-button.jsx-cf5aa5d5172292ba{padding:1rem 2rem;font-size:1.5rem;letter-spacing:.1em;width:auto;min-width:200px}.tutorial-title.jsx-cf5aa5d5172292ba{font-size:1.5rem;-webkit-text-stroke:.5px#ff6b00}.tutorial-section.jsx-cf5aa5d5172292ba{margin-top:1.5rem}.intro-hints.jsx-cf5aa5d5172292ba{margin-top:1.5rem}.intro-hints.jsx-cf5aa5d5172292ba p.jsx-cf5aa5d5172292ba{font-size:.9rem}}@media(max-width:480px){.intro-scene.jsx-cf5aa5d5172292ba{padding:.5rem .25rem}.game-title.jsx-cf5aa5d5172292ba{font-size:1.75rem;letter-spacing:.05em;-webkit-text-stroke:1px#ff6b00;margin-bottom:.5rem}.game-subtitle.jsx-cf5aa5d5172292ba{font-size:.7rem;letter-spacing:.1em;margin:.25rem 0 1rem}.play-button.jsx-cf5aa5d5172292ba{padding:.75rem 1.5rem;font-size:1.1rem;letter-spacing:.05em;border:3px solid#ff6b00;min-width:160px}.tutorial-title.jsx-cf5aa5d5172292ba{font-size:1.1rem;margin-bottom:.75rem;-webkit-text-stroke:.5px#ff6b00}.tutorial-section.jsx-cf5aa5d5172292ba{max-width:100%;margin-top:1rem;padding:0 .25rem}.intro-hints.jsx-cf5aa5d5172292ba{margin-top:1rem}.intro-hints.jsx-cf5aa5d5172292ba p.jsx-cf5aa5d5172292ba{font-size:.8rem;margin:.25rem 0}}@media(max-width:360px){.intro-scene.jsx-cf5aa5d5172292ba{padding:.25rem .125rem}.game-title.jsx-cf5aa5d5172292ba{font-size:1.5rem;letter-spacing:.03em;-webkit-text-stroke:.75px#ff6b00}.game-subtitle.jsx-cf5aa5d5172292ba{font-size:.65rem;letter-spacing:.08em}.play-button.jsx-cf5aa5d5172292ba{padding:.6rem 1.2rem;font-size:1rem;letter-spacing:.03em;border:2px solid#ff6b00;min-width:140px}.tutorial-title.jsx-cf5aa5d5172292ba{font-size:1rem}}"})]})}function v(){let[e,t]=(0,o.useState)(!1);return e?(0,a.jsx)(g,{}):(0,a.jsx)(w,{onPlay:()=>t(!0)})}},8164:(e,t,n)=>{Promise.resolve().then(n.bind(n,6795))},8774:(e,t,n)=>{"use strict";n.d(t,{WF:()=>c,aK:()=>i});var a=n(5339);let o=["#00ff00","#0088ff","#ff00ff","#ffff00","#ff8800","#00ffff","#ff0088","#88ff00","#ff0000","#8800ff","#00ff88","#ff8888","#88ff88","#8888ff","#ffff88","#ff88ff"];function i(e){var t,n;let a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length<2)return console.warn("⚠️ Not enough pickup nodes to spawn delivery"),null;let r=new Set;i.forEach(e=>{"waiting_pickup"===e.status&&r.add(e.pickupNodeId),"in_transit"===e.status&&r.add(e.dropoffNodeId)});let c=e.filter(e=>!r.has(e.id));if(c.length<2)return console.warn("⚠️ Not enough available pickup nodes (all nodes in use)"),null;let s=c[Math.floor(Math.random()*c.length)];do a=c[Math.floor(Math.random()*c.length)];while(a.id===s.id);let d=s.position.distanceTo(a.position),l=Math.floor((((null==(t=s.metadata)?void 0:t.payoutMultiplier)||1)+((null==(n=a.metadata)?void 0:n.payoutMultiplier)||1))/2*(100+10*d)),f=new Set(i.map(e=>e.color)),p=o.filter(e=>!f.has(e)),x=p.length>0?p:o,u=x[Math.floor(Math.random()*x.length)],h={id:"delivery-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),pickupNodeId:s.id,dropoffNodeId:a.id,status:"waiting_pickup",spawnTime:Date.now(),payout:l,color:u};return console.log("\uD83D\uDCE6 Spawned delivery: ".concat(s.id," → ").concat(a.id," ($").concat(l,") [").concat(u,"]")),h}function r(e,t,n){for(let a of t.filter(e=>"waiting_pickup"===e.status)){let t=n.find(e=>e.id===a.pickupNodeId);if(t&&1.1>e.distanceTo(t.position))return{event:a,node:t}}return null}function c(e,t,n){let o=[];for(let c of e){if(!c.path)continue;let e=c.path.points;if(e.length<2)continue;let s=1/(e.length-1),d=Math.floor(c.t/s),l=c.t%s/s,f=e[Math.min(d,e.length-2)],p=e[Math.min(d+1,e.length-1)],x=new a.Pq0().lerpVectors(f,p,l);if(c.hasPackage){let e=r(x,t,n);e&&.1>Math.random()&&console.log("\uD83D\uDEAB ".concat(c.id," ignoring pickup ").concat(e.event.id," (already carrying ").concat(c.currentDeliveryId,")"))}else{var i;let e=r(x,t,n);e&&(i=e.event,c.hasPackage=!0,c.currentDeliveryId=i.id,i.status="in_transit",i.claimedByTaxiId=c.id,i.pickupTime=Date.now(),console.log("\uD83D\uDE95 ".concat(c.id," picked up ").concat(i.id," at ").concat(i.pickupNodeId)))}if(c.currentDeliveryId){let e=function(e,t,n,a){let o=n.find(e=>e.id===t&&"in_transit"===e.status);if(!o)return null;let i=a.find(e=>e.id===o.dropoffNodeId);return i&&1.1>e.distanceTo(i.position)?{event:o,node:i}:null}(x,c.currentDeliveryId,t,n);e&&(!function(e,t){e.hasPackage=!1,e.currentDeliveryId=void 0,e.money+=t.payout,t.status="completed",t.deliveryTime=Date.now();let n=((t.deliveryTime-t.spawnTime)/1e3).toFixed(1);console.log("✅ ".concat(e.id," completed ").concat(t.id," at ").concat(t.dropoffNodeId," (+$").concat(t.payout,") in ").concat(n,"s")),t.payout}(c,e.event),o.push(e.event.id))}}return o}},8946:(e,t,n)=>{"use strict";n.d(t,{D3:()=>g,nt:()=>h,WW:()=>u});var a=n(5339),o=n(4510);function i(e){return["North","East","South","West"][e]}let r=[new a.Pq0(-15,.2,-15),new a.Pq0(-15,.2,-5),new a.Pq0(-15,.2,5),new a.Pq0(-15,.2,15)],c=[new a.Pq0(-15,.2,15),new a.Pq0(-5,.2,15),new a.Pq0(5,.2,15),new a.Pq0(15,.2,15)],s=[new a.Pq0(15,.2,15),new a.Pq0(15,.2,5),new a.Pq0(15,.2,-5),new a.Pq0(15,.2,-15)],d=[new a.Pq0(15,.2,-15),new a.Pq0(5,.2,-15),new a.Pq0(-5,.2,-15),new a.Pq0(-15,.2,-15)],l={id:"path-1",points:r,length:(0,o.ac)(r)},f={id:"path-2",points:c,length:(0,o.ac)(c)},p={id:"path-3",points:s,length:(0,o.ac)(s)},x={paths:[l,f,p,{id:"path-4",points:d,length:(0,o.ac)(d)}],nodes:[{id:"node-1",position:new a.Pq0(-15,.2,-15),neighbors:["node-2","node-4",null,null],types:["intersection"]},{id:"node-2",position:new a.Pq0(-15,.2,15),neighbors:[null,"node-3","node-1",null],types:["intersection","pickup"],metadata:{zoneName:"North Terminal",payoutMultiplier:1.2}},{id:"node-3",position:new a.Pq0(15,.2,15),neighbors:[null,null,"node-4","node-2"],types:["intersection","red_light"],metadata:{redLightDuration:3,greenLightDuration:5,currentState:"green"}},{id:"node-4",position:new a.Pq0(15,.2,-15),neighbors:["node-3",null,null,"node-1"],types:["intersection","dropoff"],metadata:{zoneName:"Downtown",payoutMultiplier:1}}]};function u(e){console.log("\uD83D\uDEE3️ Updating road network with ".concat(e.length," extracted nodes"));let t=[],n=new Set;return e.forEach(a=>{let i=[];a.neighbors?(i=a.neighbors.filter(e=>null!==e),console.log("  ".concat(a.id,": topological format, ").concat(i.length," neighbors"))):a.next&&(i=a.next,console.log("  ".concat(a.id,": legacy format, ").concat(i.length," next nodes"))),i.forEach(i=>{let r="".concat(a.id,"_to_").concat(i);if(n.has(r))return;let c=e.find(e=>e.id===i);if(!c)return void console.warn("⚠️ Node ".concat(i," referenced by ").concat(a.id," not found"));let s=[a.position.clone(),c.position.clone()];t.push({id:r,points:s,length:(0,o.ac)(s)}),n.add(r),console.log("  ✅ Created path: ".concat(r))})}),x={nodes:e,paths:t},console.log("✅ Road network updated: ".concat(e.length," nodes, ").concat(t.length," paths")),console.log("\uD83D\uDCCA Network Graph:"),e.forEach(e=>{e.neighbors?console.log("  ".concat(e.id," [TOPO] → N:").concat(e.neighbors[0]||"-",", E:").concat(e.neighbors[1]||"-",", S:").concat(e.neighbors[2]||"-",", W:").concat(e.neighbors[3]||"-")):e.next&&console.log("  ".concat(e.id," [LEGACY] → [").concat(e.next.join(", "),"]"))}),console.log("\uD83D\uDEE3️ Generated Paths:"),t.forEach(e=>{console.log("  ".concat(e.id," (").concat(e.length.toFixed(2)," units)"))}),x}function h(){return x}function g(e,t,n){let o=x.paths,r=x.nodes,c=e.split("_to_");if(2!==c.length)return console.warn("⚠️ Invalid path ID format: ".concat(e)),null;let s=c[0],d=c[1],l=r.find(e=>e.id===d);if(!l)return console.warn("⚠️ Destination node ".concat(d," not found")),null;if(l.neighbors&&n){var f;let e;for(let t=0;t<4;t++)if(l.neighbors[t]===s){e=t;break}void 0===e&&console.warn("⚠️ Could not calculate incomingDir for ".concat(s," → ").concat(d,", using fallback"));let a=null!=(f=null!=e?e:n.incomingDir)?f:0,r=l.types.includes("intersection")?null==t?void 0:t.get(d):void 0,c=(null==r?void 0:r.mode)||"pass_through",p=function(e,t,n){if(!e.neighbors||4!==e.neighbors.length)return console.warn("⚠️ Node ".concat(e.id," is not a valid intersection (no neighbors array)")),{nextId:null,outgoingDir:null};let a=e.neighbors.filter(e=>null!==e).length;if(1===a){let n=e.neighbors[t];if(n)return console.log("⚠️ ".concat(e.id,": Dead end, U-turn back → ").concat(n)),{nextId:n,outgoingDir:t}}if(2===a)for(let n=0;n<4;n++){let a=n;if(a!==t&&null!==e.neighbors[a]){let n=e.neighbors[a];return console.log("\uD83D\uDD04 ".concat(e.id,": Corner, Incoming ").concat(i(t)," → ").concat(i(a)," → ").concat(n)),{nextId:n,outgoingDir:a}}}for(let a of function(e,t){if(2===e)switch(t){case"pass_through":return[0,1,2,3];case"turn_right":return[1,2,3,0];case"turn_left":return[3,2,1,0]}else if(0===e)switch(t){case"pass_through":return[2,3,0,1];case"turn_right":return[3,0,1,2];case"turn_left":return[1,0,3,2]}else if(3===e)switch(t){case"pass_through":return[1,2,3,0];case"turn_right":return[2,3,0,1];case"turn_left":return[0,3,2,1]}else switch(t){case"pass_through":return[3,0,1,2];case"turn_right":return[0,1,2,3];case"turn_left":return[2,1,0,3]}}(t,n)){if(a===t)continue;let o=e.neighbors[a];if(null!==o)return console.log("✅ ".concat(e.id,": Incoming ").concat(i(t),", Mode ").concat(n,", Chose ").concat(i(a)," → ").concat(o)),{nextId:o,outgoingDir:a}}return console.warn("⚠️ ".concat(e.id,": No available path from ").concat(i(t)," with mode ").concat(n)),{nextId:null,outgoingDir:null}}(l,a,c);if(!p.nextId||null===p.outgoingDir)return console.warn("⚠️ No available route from ".concat(d)),null;{let e=o.find(e=>e.id==="".concat(d,"_to_").concat(p.nextId));if(!e)return console.warn("⚠️ Path ".concat(d,"_to_").concat(p.nextId," not found in network")),null;{let t=(p.outgoingDir+2)%4;return n.currentIntersectionId=d,n.incomingDir=t,console.log("\uD83D\uDEA6 ".concat(d,": Mode ").concat(c,", In ").concat(i(a)," → Out ").concat(i(p.outgoingDir)," → ").concat(p.nextId)),e}}}let p=o.filter(e=>e.id.startsWith("".concat(d,"_to_")));if(0===p.length)return console.warn("⚠️ No next path found from node: ".concat(d)),null;if(1===p.length)return p[0];if(l.types.includes("intersection")&&t){let n=t.get(d);if(n){let t=function(e,t,n){let o=n.filter(e=>e.id.startsWith("".concat(t.id,"_to_"))),i=n.find(t=>t.id===e);if(!i)return console.warn("⚠️ Incoming path ".concat(e," not found")),{straight:null,left:null,right:null};if(1===o.length)return{straight:o[0].id,left:null,right:null};let r={straight:null,left:null,right:null};return o.forEach(e=>{let n=function(e,t,n){let o=new a.Pq0().subVectors(e.points[e.points.length-1],e.points[e.points.length-2]).normalize(),i=new a.Pq0().subVectors(n.points[1],n.points[0]).normalize(),r=new a.Pq0().crossVectors(o,i);return o.dot(i)>.8?"straight":r.y>.1?"left":r.y<-.1?"right":"straight"}(i,0,e);r[n]?console.warn('⚠️ Multiple paths detected as "'.concat(n,'" at ').concat(t.id)):r[n]=e.id}),console.log("\uD83D\uDCCD Path categorization at ".concat(t.id,":"),{incoming:e,straight:r.straight,left:r.left,right:r.right}),r}(e,l,o),i=null;switch(n.mode){case"pass_through":i=t.straight;break;case"turn_left":i=t.left;break;case"turn_right":i=t.right}if(i){let e=o.find(e=>e.id===i);if(e)return console.log("\uD83D\uDEA6 Path-based routing at ".concat(d,": ").concat(n.mode," → ").concat(i)),e}if(t.straight){let e=o.find(e=>e.id===t.straight);if(e)return console.warn("⚠️ Intersection ".concat(d,': mode "').concat(n.mode,'" not available, using straight')),e}}}let u=Math.floor(Math.random()*p.length);return console.log("\uD83C\uDFB2 Random path selection at ".concat(d,": ").concat(p[u].id)),p[u]}}},e=>{e.O(0,[831,229,441,255,358],()=>e(e.s=8164)),_N_E=e.O()}]);