(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{4809:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>R});var n=i(5155),a=i(2115),l=i(1847);let s=(0,l.A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),o=(0,l.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var r=i(4033),c=i(5921),u=i(3511),d=i(7909),p=i(8774),f=i(4476),h=i(3381),x=i.n(h),v=i(8615),k=i.n(v),y=i(9135),m=i.n(y),_=i(6620),w=i.n(_);let g=(0,d.default)(()=>Promise.all([i.e(535),i.e(443),i.e(31)]).then(i.bind(i,31)),{loadableGenerated:{webpack:()=>[31]},ssr:!1});function R(e){var t;let{onComplete:i,onGoBack:l}=e,[d,h]=(0,a.useState)("tutorial-taxi-1"),[v,y]=(0,a.useState)(!0),[_,R]=(0,a.useState)(!0),{taxisRef:T,deliveriesRef:b,pickupNodesRef:j,deliveryTimerRef:C}=function(){let e=(0,a.useRef)([{id:"tutorial-taxi-1",state:"driving_to_pickup",path:null,t:0,speed:1.5,isFocused:!1,currentIntersectionId:void 0,incomingDir:0,previousNodeId:void 0,hasPackage:!1,currentDeliveryId:void 0,money:0,isReversing:!1,collisionCooldown:0,isReady:!1}]),t=(0,a.useRef)([]),i=(0,a.useRef)(1e4),n=(0,a.useRef)([]),l=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{let i=i=>{let{network:a}=i.detail;if(console.log("\uD83D\uDCDA Tutorial received road network update:",a),a.paths.length>0&&e.current[0]){let t=a.paths[0];e.current[0].path=t,e.current[0].t=0,e.current[0].isReady=!0,console.log("âœ… Tutorial taxi on path: ".concat(t.id)),console.log("   Total paths: ".concat(a.paths.length))}if(a.nodes){let e=a.nodes.filter(e=>e.types.includes("pickup"));if(n.current=e,console.log("\uD83D\uDCCD Tutorial has ".concat(e.length," pickup nodes")),e.length>=2&&!l.current){for(let i=0;i<2;i++){let i=(0,p.aK)(e,t.current);i&&t.current.push(i)}l.current=!0,console.log("\uD83C\uDFAE Tutorial spawned 2 initial deliveries")}}};return window.addEventListener("roadNetworkUpdated",i),()=>{window.removeEventListener("roadNetworkUpdated",i)}},[]),{taxisRef:e,deliveriesRef:t,pickupNodesRef:n,deliveryTimerRef:i}}(),D=(0,a.useCallback)(e=>{h(t=>t===e?null:e)},[]),N=(0,a.useCallback)(()=>{h(null)},[]),S=(0,a.useCallback)(()=>{y(e=>!e),R(!1)},[]);return(0,a.useEffect)(()=>{let e=e=>{" "===e.key&&(e.preventDefault(),S())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[S]),(0,n.jsxs)("div",{className:w().tutorialContainer,children:[(0,n.jsx)(g,{taxisRef:T,deliveriesRef:b,pickupNodesRef:j,deliveryTimerRef:C,followTaxiId:d,isPaused:v}),(0,n.jsxs)("div",{className:w().tutorialOverlay,children:[(0,n.jsx)(f.l,{taxisRef:T,onTaxiSelect:D,onResetCamera:N,selectedTaxiId:d}),(0,n.jsxs)("div",{className:m().topLeft,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,n.jsx)("button",{className:x().icon,onClick:()=>{i()},title:"Start Game",children:(0,n.jsx)(s,{size:24})}),(0,n.jsx)("button",{className:x().icon,onClick:()=>{l&&l()},title:"Go Back to Menu",children:(0,n.jsx)(o,{size:24})})]}),(0,n.jsxs)("div",{className:m().bottomRight,style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[_&&(0,n.jsx)("div",{style:{animation:"bounce 0.5s ease-in-out infinite",marginBottom:"8px",filter:"drop-shadow(0 0 8px #ffff00)"},children:(0,n.jsx)(r.A,{size:32,color:"#ffff00",strokeWidth:3})}),(0,n.jsx)("button",{className:x().icon,onClick:S,children:v?(0,n.jsx)(c.A,{size:24}):(0,n.jsx)(u.A,{size:24})})]}),(0,n.jsxs)("div",{className:k().moneyDisplay,children:["$",(null==(t=T.current[0])?void 0:t.money)||0]})]})]})}},6620:e=>{e.exports={tutorialContainer:"TutorialScene_tutorialContainer__JYRcU",tutorialOverlay:"TutorialScene_tutorialOverlay__Ur0l0",instructionPanel:"TutorialScene_instructionPanel__kcusO",stepTitle:"TutorialScene_stepTitle__EZ_Op",stepDescription:"TutorialScene_stepDescription__V1U_R",buttonGroup:"TutorialScene_buttonGroup__6nSDN"}}}]);